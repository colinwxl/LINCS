/* eslint-disable */
var Clustergrammer=function(t){function e(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function o(t){var e=a(t),o=n(e);if(o.use_sidebar){var l=r(119);o=l(e,o)}var s=i(o);return{params:o,config:e,find_entity:s.find_entity,get_entities:s.get_entities,reorder:r(20),opacity_slider:s.opacity_slider,opacity_function:s.opacity_function,reset_zoom:s.reset_zoom,change_category:r(96)}}var a=r(64),n=r(44),i=r(129);t.exports=o},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports={normal_name:function(t){var e=t.name.replace(/_/g," ").split("#")[0];return e},is_supported_order:function(t){return"ini"===t||"clust"===t||"rank_var"===t||"rank"===t||"class"===t||"alpha"==t},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},is_undefined:function(t){return void 0===t},extend:function(t,e){t=t||{};for(var o in e)"object"===r(e[o])?t[o]=this.extend(t[o],e[o]):t[o]=e[o];return t}}},function(t,e,r){"use strict";var o=r(134);t.exports=function(t,e){var r={};return r.min_x=Math.abs(e.trans_x)/e.zoom_x-2*t.viz.rect_width,r.min_y=Math.abs(e.trans_y)/e.zoom_y-2*t.viz.rect_height,r.max_x=Math.abs(e.trans_x)/e.zoom_x+t.viz.clust.dim.width/e.zoom_x,r.max_y=Math.abs(e.trans_y)/e.zoom_y+t.viz.clust.dim.height/e.zoom_y,d3.selectAll(t.root+" .row_label_group").each(function(){o(r,this,"row")}),d3.selectAll(t.root+" .row").each(function(){o(r,this,"row")}),d3.selectAll(t.root+" .col_label_text").each(function(){o(r,this,"col")}),r}},function(t,e){"use strict";t.exports=function(){function t(t){z=v(t),x=z.createSVGPoint(),document.body.appendChild(w)}function e(){return"n"}function r(){return[0,0]}function o(){return" "}function a(){var t=h();return{top:t.n.y-w.offsetHeight,left:t.n.x-w.offsetWidth/2}}function n(){var t=h();return{top:t.s.y,left:t.s.x-w.offsetWidth/2}}function i(){var t=h();return{top:t.e.y-w.offsetHeight/2,left:t.e.x}}function l(){var t=h();return{top:t.w.y-w.offsetHeight/2,left:t.w.x-w.offsetWidth}}function s(){var t=h();return{top:t.nw.y-w.offsetHeight,left:t.nw.x-w.offsetWidth}}function c(){var t=h();return{top:t.ne.y-w.offsetHeight,left:t.ne.x}}function _(){var t=h();return{top:t.sw.y,left:t.sw.x-w.offsetWidth}}function d(){var t=h();return{top:t.se.y,left:t.e.x}}function u(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}function v(t){return t=t.node(),"svg"==t.tagName.toLowerCase()?t:t.ownerSVGElement}function h(){var t=b||d3.event.target,e={},r=t.getScreenCTM(),o=t.getBBox(),a=o.width,n=o.height,i=o.x,l=o.y,s=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;return r.a=1,r.d=1,r.e=r.e+c,r.f=r.f+s,x.x=i,x.y=l,e.nw=x.matrixTransform(r),x.x=x.x+a,e.ne=x.matrixTransform(r),x.y=x.y+n,e.se=x.matrixTransform(r),x.x=x.x-a,e.sw=x.matrixTransform(r),x.y=x.y-n/2,e.w=x.matrixTransform(r),x.x=x.x+a,e.e=x.matrixTransform(r),x.x=x.x-a/2,x.y=x.y-n/2,e.n=x.matrixTransform(r),x.y=x.y+n,e.s=x.matrixTransform(r),e}function m(t){var e=d3.select(t).classed("hovering");e&&d3.selectAll(".d3-tip").transition().duration(250).style("opacity",0)}var f=e,p=r,g=o,w=u(),z=null,x=null,b=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(b=e.pop());var r,o=g.apply(this,e),a=p.apply(this,e),n=f.apply(this,e),i=d3.select(w),l=0;for(i.html(o).style({opacity:1,"pointer-events":"all"});l--;)i.classed(k[l],!1);r=y.get(n).apply(this),i.classed(n,!0).style({top:r.top+a[0]+"px",left:r.left+a[1]+"px"});var s=d3.select(this).attr("class");return s.indexOf("tile")>=0&&setTimeout(m,1e4,this),t},t.hide=function(){var e=d3.select(w);return e.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(w).attr(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(w),r),t},t.style=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(w).style(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(w),r),t},t.direction=function(e){return arguments.length?(f=null==e?e:d3.functor(e),t):f},t.offset=function(e){return arguments.length?(p=null==e?e:d3.functor(e),t):p},t.html=function(e){return arguments.length?(g=null==e?e:d3.functor(e),t):g};var y=d3.map({n:a,s:n,e:i,w:l,nw:s,ne:c,sw:_,se:d}),k=y.keys();return t}},function(t,e){"use strict";t.exports=function(t,e,r){d3.select(e).classed("hovering",!1),_.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight","normal")}),r.hide()}},function(t,e){"use strict";t.exports=function(t,e,r,o){function a(){if(d3.select(e).classed("hovering")){var o=Number(d3.select(t.root+" .viz_svg").attr("is_zoom"));0===o&&t.matrix.show_tile_tooltips&&(d3.selectAll(".d3-tip").style("display","block"),r.show.apply(e,l))}}var n,i=o[0],l=[].slice.call(o),s=1e3;d3.select(e).classed("hovering",!0),_.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight",function(t){var r,o=i[e+"_name"].replace(/_/g," ")===t.name;return r=o?"bold":"normal"})}),l.push(e),clearTimeout(n),n=setTimeout(a,s,e)}},function(t,e,r){"use strict";var o=r(67),a=r(28),n=r(30),i=r(29);t.exports=function(t){var e,r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],l=o(t);d3.selectAll(t.root+" .col_dendro_group").empty()?e=!1:(e=!0,d3.selectAll(t.root+" .col_dendro_group").remove()),r&&(e=!1),d3.select(t.root+" .col_dendro_container").selectAll("path").data(l,function(t){return t.name}).enter().append("path").style("opacity",0).attr("class","col_dendro_group").attr("d",function(t){var e=t.pos_top,r=0,o=t.pos_mid,a=30,n=t.pos_bot,i=0,l="M"+e+","+r+", L"+o+", "+a+", L"+n+","+i+" Z";return l}).style("fill","black").on("mouseover",function(e){var r;r=t.sim_mat?"both":"col",n(this),a(t,this,e,r)}).on("mouseout",function(){"clust"===t.viz.inst_order.col&&d3.select(this).style("opacity",t.viz.dendro_opacity),d3.selectAll(t.root+" .dendro_shadow").remove(),i(this)});var s;s="clust"===t.viz.inst_order.row?t.viz.dendro_opacity:0,e?d3.select(t.root+" .col_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",s):d3.select(t.root+" .col_dendro_container").selectAll("path").style("opacity",s)}},function(t,e,r){"use strict";var o=r(68),a=r(28),n=r(30),i=r(29);t.exports=function(t){var e,r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],l=o(t);d3.selectAll(t.root+" .row_dendro_group").empty()?e=!1:(e=!0,d3.selectAll(t.root+" .row_dendro_group").remove()),r&&(e=!1),d3.select(t.root+" .row_dendro_container").selectAll("path").data(l,function(t){return t.name}).enter().append("path").style("opacity",0).attr("class","row_dendro_group").attr("d",function(t){var e=0,r=t.pos_top,o=30,a=t.pos_mid,n=0,i=t.pos_bot,l="M"+e+","+r+", L"+o+", "+a+", L"+n+","+i+" Z";return l}).style("fill","black").on("mouseover",function(e){var r;r=t.sim_mat?"both":"row",n(this),a(t,this,e,r)}).on("mouseout",function(){"clust"===t.viz.inst_order.col&&d3.select(this).style("opacity",t.viz.dendro_opacity),d3.selectAll(t.root+" .dendro_shadow").remove(),i(this)});var s;s="clust"===t.viz.inst_order.col?t.viz.dendro_opacity:0,e?d3.select(t.root+" .row_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",s):d3.select(t.root+" .row_dendro_container").selectAll("path").style("opacity",s)}},function(t,e,r){"use strict";var o=r(7),a=r(6);t.exports=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?1500:arguments[2];"row"===e&&"clust"===t.viz.inst_order.col&&setTimeout(o,r,t,!0),"col"===e&&"clust"===t.viz.inst_order.row&&setTimeout(a,r,t,!0),"clust"!=t.viz.inst_order.row&&d3.selectAll(t.root+" .col_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null),"clust"!=t.viz.inst_order.col&&d3.selectAll(t.root+" .row_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null)}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch_y,o=t.viz.y_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch,a=t.viz.y_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch,n="M"+e+", "+o+" ,   L"+r+", "+a+",  L"+r+",0 Z";return n}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch_y,o=0,a=t.viz.y_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch,n="M"+e+","+o+", L"+e+", "+a+", L"+r+",0 Z";return n}},function(t,e){"use strict";t.exports=function(t,e){var r=t[e].sort(function(t,e){return e-t})[0];return r=String(r)}},function(t,e,r){"use strict";var o=r(11);t.exports=function(t,e){var r={},a={},n={};return r.state=o(t.viz.filter_data,e),n.top=e.split("_")[0],n.node=e.split("_")[1],n.measure=e.split("_")[2],"row"===n.node?a.node="rows":a.node="columns","N"===n.top&&(r.suffix=" "+a.node),"pct"===n.top&&(r.suffix="%"),"sum"==n.measure?a.measure="sum":"var"==n.measure&&(a.measure="variance"),"sum"===n.measure&&(r.text="Top "+a.node+" "+a.measure+": "),"var"===n.measure&&(r.text="Top "+a.node+" "+a.measure+": "),_.keys(t.viz.possible_filters).indexOf("enr_score_type")>-1&&"col"===n.node&&(r.text="Top Enriched Terms: ",r.suffix=""),r}},function(t,e){"use strict";t.exports=function(t,e){var r=_.keys(e)[0];return _.each(_.keys(t.viz.possible_filters),function(o){if(o!=r&&!d3.select(t.root+" .slider_"+o).empty()){var a=d3.select(t.root+" .slider_"+o).attr("current_state");e[o]=a}}),e}},function(t,e,r){"use strict";var o=r(1),a=r(24),n=r(22);t.exports=function(t){d3.selectAll(t.root+" .row_label_group").select("text").text(function(t){return o.normal_name(t)}),d3.selectAll(t.root+" .col_label_text").select("text").text(function(t){return o.normal_name(t)}),n(t),d3.selectAll(t.root+" .row_label_group").each(function(){a(t,this,"row")}),d3.selectAll(t.root+" .col_label_group").each(function(){a(t,this,"col")})}},function(t,e){"use strict";t.exports=function(t){var e=t.svg_dim.height-t.clust.margin.top-t.dendro_room.col-t.bottom_space;return t.clust.dim.height=e,t}},function(t,e){"use strict";t.exports=function(t){t.clust={},t.clust.margin={},t.clust.margin.left=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.clust.margin.top=t.norm_labels.margin.top+t.norm_labels.width.col+t.cat_room.col+t.uni_margin;var e=t.svg_dim.width-t.clust.margin.left-t.spillover_col_slant,r=d3.scale.ordinal().rangeBands([0,e]).domain(_.range(t.num_col_nodes)),o=r.rangeBand()/2;if(o>t.norm_labels.width.col){var a=t.norm_labels.width.col/o;e*=a}return t.clust.dim={},t.clust.dim.width=e,t}},function(t,e){"use strict";t.exports=function(t){return t.labels.default_fs_row=1.01*t.viz.y_scale.rangeBand(),t.labels.default_fs_col=.87*t.viz.x_scale.rangeBand(),t.labels.default_fs_row>t.labels.max_allow_fs&&(t.labels.default_fs_row=t.labels.max_allow_fs),t.labels.default_fs_col>t.labels.max_allow_fs&&(t.labels.default_fs_col=t.labels.max_allow_fs),t}},function(t,e){"use strict";t.exports=function(t){var e={},r={};_.each(t,function(t){var e=_.keys(t);_.each(e,function(e){"nodes"!=e&&(_.has(r,e)||(r[e]=[]),r[e].push(t[e]),r[e]=_.unique(r[e]))})});var o=_.keys(r);_.each(o,function(t){var o=r[t],a=o.length,n="categorical";_.each(o,function(t){"number"==typeof t&&(n="numerical")}),a>1&&(e[t]=n)});var a={};return a.possible_filters=e,a.filter_data=r,a}},function(t,e){"use strict";t.exports=function(t){return t.viz.svg_dim={},t.viz.svg_dim.width=Number(d3.select(t.viz.viz_wrapper).style("width").replace("px","")),t.viz.svg_dim.height=Number(d3.select(t.viz.viz_wrapper).style("height").replace("px","")),t}},function(t,e,r){"use strict";var o=r(8),a=r(2);t.exports=function(t,e,r){var n;"row"===r?n="col":"col"===r&&(n="row"),t.viz.run_trans=!0,"row"===n?t.viz.inst_order.row=e:"col"===n&&(t.viz.inst_order.col=e),t.viz.show_dendrogram&&o(t,r);var i=t.network_data.row_nodes,l=_.pluck(i,"name"),s=t.network_data.col_nodes,c=_.pluck(s,"name");"row"===n?t.viz.x_scale.domain(t.matrix.orders[t.viz.inst_order.row+"_row"]):"col"==n&&t.viz.y_scale.domain(t.matrix.orders[t.viz.inst_order.col+"_col"]);var d;d3.selectAll(t.root+" .tile")[0].length<t.matrix.def_large_matrix?(d=d3.select(t.root+" .clust_group").transition().duration(2500),d.selectAll(".row").attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).selectAll(".tile").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d.selectAll(".tile_up").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d.selectAll(".tile_dn").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d3.select(t.root+" .row_label_zoom_container").selectAll(".row_label_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_text").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}),d3.selectAll(t.root+" .row_cat_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.selectAll(t.root+" .col_cat_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+",0)"})):(d=d3.select(t.root+" .clust_group"),d.selectAll(".row").attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).selectAll(".tile").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d.selectAll(".tile_up").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d.selectAll(".tile_dn").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+" , 0)"}),d3.select(t.root+" .row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_text").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}),d3.selectAll(t.root+" .row_cat_group").attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.selectAll(t.root+" .col_cat_group").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+",0)"})),t.network_data.links.forEach(function(e){e.x=t.viz.x_scale(e.target),e.y=t.viz.y_scale(e.source)});var u={};u.zoom_x=1,u.zoom_y=1,u.trans_x=0,u.trans_y=0,a(t,u),setTimeout(function(){t.viz.run_trans=!1},2500)}},function(t,e){"use strict";t.exports=function(t){var e=t.clust.dim.width/t.num_col_nodes,r=t.clust.dim.height/t.num_row_nodes;return t.zoom_switch=e/r,t.zoom_switch_y=1,t.zoom_switch<1&&(t.zoom_switch_y=1/t.zoom_switch,t.zoom_switch=1),t}},function(t,e,r){"use strict";var o=r(131);t.exports=function(t){var e,r=t.labels.default_fs_row,a=o(t);a.row>t.labels.max_allow_fs?(e=t.viz.zoom_switch_y?t.zoom_behavior.scale()/t.viz.zoom_switch_y:t.zoom_behavior.scale(),1>e&&(e=1),r=t.labels.max_allow_fs/e,d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",r+"px").attr("y",.5*t.viz.rect_height+.35*r)):d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),a.col>t.labels.max_allow_fs?(e=t.viz.zoom_switch>1?t.zoom_behavior.scale()/t.viz.zoom_switch:t.zoom_behavior.scale(),1>e&&(e=1),r=t.labels.max_allow_fs/e,r>.7*t.viz.rect_width&&(r=.7*t.viz.rect_width),d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",r+"px")):d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",t.labels.default_fs_col+"px")}},function(t,e,r){"use strict";var o=r(25);t.exports=function(t){d3.selectAll(t.viz.zoom_element).on("dblclick.zoom",null),d3.select(t.viz.zoom_element).on("dblclick",function(){o(t,0,0,1)})}},function(t,e){"use strict";t.exports=function(t,e,r){function o(){return _=d3.select(this).text(),c=_.length,u=c-3,s=_.substring(0,u)+".."}function a(t){return _=d3.select(this).text(),c=".."===_.slice(-2)?_.length-2:_.length,d=t.name,u=c+2,s=d.substring(0,u)+"..",s.length>d.length&&(s=d),s}function n(t,e){return l=1>e?t:t*e}if("none"!=d3.select(e).style("display")){var i,l,s,c,_,d,u,v,h=t.viz.norm_labels.width[r];i="row"===r?t.viz.zoom_switch_y?t.zoom_behavior.scale()/t.viz.zoom_switch_y:t.zoom_behavior.scale():t.viz.zoom_switch>1?t.zoom_behavior.scale()/t.viz.zoom_switch:t.zoom_behavior.scale();var m;d3.select(e).select("text").each(function(t){m=t.name.length});var f=d3.select(e).select("text").node().getBBox().width;if(l=n(f,i),l>h)for(v=1;m>v;v++)l>h&&(d3.select(e).select("text").text(o),f=d3.select(e).select("text").node().getBBox().width,l=n(f,i));else if(.75*h>l)for(v=1;m>v;v++).75*h>l&&(d3.select(e).select("text").text(a),f=d3.select(e).select("text").node().getBBox().width,l=n(f,i))}}},function(t,e,r){"use strict";var o=r(1),a=r(14),n=r(2);t.exports=function(t,e,r,i){d3.selectAll(".tile_tip").style("display","none");var l={};if(l.zoom_x=1,l.zoom_y=1,l.trans_x=0,l.trans_y=0,n(t,l),!t.viz.run_trans){var s=t.viz.clust.dim.height/2,c=s/t.viz.zoom_switch;if(r>=s-c){var _=s-r,d=-s/t.viz.zoom_switch+_;r+=d}-(s-c)>r&&(_=s+r,d=s/t.viz.zoom_switch-_,r+=d);var u,v=i;u=i<=t.viz.zoom_switch?1:i/t.viz.zoom_switch;var h=700,m=-(v-1)*s;d3.select(t.root+" .clust_group").transition().duration(h).attr("transform","translate("+[0,0+m]+") scale("+u+","+v+")translate("+[e,r]+")"),d3.select(t.root+" .row_label_zoom_container").transition().duration(h).attr("transform","translate("+[0,m]+") scale("+v+","+v+")translate("+[0,r]+")"),d3.select(t.root+" .row_cat_container").transition().duration(h).attr("transform","translate("+[0,m]+") scale(1,"+v+")translate("+[0,r]+")"),d3.select(t.root+" .row_dendro_container").transition().duration(h).attr("transform","translate("+[0,m]+") scale("+u+","+v+")translate("+[t.viz.uni_margin/2,r]+")"),d3.select(t.root+" .col_zoom_container").transition().duration(h).attr("transform"," scale("+u+","+u+")translate("+[e,0]+")"),d3.select(t.root+" .col_cat_container").transition().duration(h).attr("transform"," scale("+u+",1)translate("+[e,0]+")"),d3.select(t.root+" .col_dendro_container").transition().duration(h).attr("transform"," scale("+u+",1)translate("+[e,t.viz.uni_margin/2]+")");var f=t.viz.clust.margin.top+m+r*v;t.zoom_behavior.scale(v).translate([e,f]),a(t),d3.select(t.root+" .row_label_zoom_container").each(function(){var e=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",.5*e.x).attr("y",0).attr("width",.5*e.width).attr("height",t.viz.y_scale.rangeBand()).style("fill","yellow")}),o.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",function(e){var r=0;return e.value>0&&(r=t.labels.bar_scale_col(e.value)/u),r}),o.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").transition().duration(h).attr("width",function(e){var r=0;return r=t.labels.bar_scale_row(Math.abs(e.value))/v}).attr("x",function(e){var r=0;return r=-t.labels.bar_scale_row(Math.abs(e.value))/v})}}},function(t,e){"use strict";t.exports=function(t,e,r){var o;if(t.cat_names[r][e]===e){var a=parseInt(e.split("-")[1],10)+1;o="Category "+a}else o=t.cat_names[r][e];return o}},function(t,e,r){"use strict";var o=r(26);t.exports=function(t,e,r,a){function n(){if(d3.select(r).classed("hovering")){var e=[a];t.viz.sim_mat&&(e=["row","col"]),_.each(e,function(e){s.indexOf("Not ")<0&&d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",function(e){var r,o,a=d3.select(this).attr("cat");return o=e[a].indexOf(": ")>=0?e[a].split(": ")[1]:e[a],r=a===i&&o===s?t.viz.cat_colors.active_opacity:t.viz.cat_colors.opacity/4})})}}var i=d3.select(r).attr("cat"),l=o(t.viz,i,a),s=e[i];return s.indexOf(": ")>=0&&(s=s.split(": ")[1]),d3.select(r).classed("hovering",!0),setTimeout(n,700),l+": "+s}},function(t,e,r){"use strict";var o=r(70);t.exports=function(t,e,r,a){function n(){d3.select(e).classed("hovering")&&i()}function i(){"row"===a?"clust"===t.viz.inst_order.col&&o(t,e,a,r):"col"===a?"clust"===t.viz.inst_order.row&&o(t,e,a,r):"both"===a&&("clust"===t.viz.inst_order.col&&o(t,e,"row",r),"clust"===t.viz.inst_order.row&&o(t,e,"col",r))}var l=200;setTimeout(n,l)}},function(t,e){"use strict";t.exports=function(t){d3.select(t).classed("hovering",!1)}},function(t,e){"use strict";t.exports=function(t){d3.select(t).classed("hovering",!0)}},function(t,e,r){"use strict";var o=r(27),a=r(3),n=r(35);t.exports=function(t){d3.select(t.root+" .col_cat_outer_container").empty()?d3.select(t.root+" .col_container").append("g").attr("class","col_cat_outer_container").attr("transform",function(){var e=t.viz.norm_labels.width.col+2;return"translate(0,"+e+")"}).append("g").attr("class","col_cat_container"):d3.select(t.root+" .col_container").select("col_cat_outer_container").attr("transform",function(){var e=t.viz.norm_labels.width.col+2;return"translate(0,"+e+")"});var e=a().attr("class","d3-tip").direction("s").offset([5,0]).style("display","block").html(function(e){return o(t,e,this,"col")});d3.select(t.root+" .col_cat_container").selectAll("g").data(t.network_data.col_nodes,function(t){return t.name}).enter().append("g").attr("class","col_cat_group").attr("transform",function(e){var r=_.indexOf(t.network_data.col_nodes_names,e.name);return"translate("+t.viz.x_scale(r)+",0)"}),d3.select(t.root+" .col_cat_container").selectAll(".col_cat_group").call(e),d3.selectAll(t.root+" .col_cat_group").each(function(){var r,o=this;_.each(t.viz.all_cats.col,function(a){var i=parseInt(a.split("-")[1],10),l="col_cat_rect_"+String(i);r=d3.select(o).select("."+l).empty()?d3.select(o).append("rect").attr("class",l).attr("cat",a).attr("transform",function(){var e=t.viz.cat_room.symbol_width+t.viz.cat_room.separation,r=i*e;return"translate(0,"+r+")"}):d3.select(o).select("."+l),r.attr("width",t.viz.x_scale.rangeBand()).attr("height",t.viz.cat_room.symbol_width).style("fill",function(e){return t.viz.cat_colors.col[a][e[a]]}).style("opacity",t.viz.cat_colors.opacity).on("mouseover",e.show).on("mouseout",function(){e.hide(this),n(t),d3.select(this).classed("hovering",!1)})})})}},function(t,e,r){"use strict";var o=r(6);t.exports=function(t){var e=t.viz.clust.margin.left,r=t.viz.clust.margin.top+t.viz.clust.dim.height,a=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").empty()?(d3.select(t.root+" .viz_svg").append("g").attr("class","col_dendro_outer_container").attr("transform","translate("+e+","+r+")"),d3.select(t.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover",!0).attr("fill",t.viz.background_color).attr("width",t.viz.svg_dim.width).attr("height",a+"px"),d3.select(t.root+" .col_dendro_outer_container").append("g").attr("class","col_dendro_container").attr("transform","translate(0,"+t.viz.uni_margin/2+")"),d3.select(t.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover_top",!0).attr("fill",t.viz.background_color).attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")")):(d3.select(t.root+" .viz_svg").select("col_dendro_outer_container").attr("transform","translate("+e+","+r+")"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",a+"px")),o(t),"clust"!=t.viz.inst_order.row&&d3.selectAll(t.root+" .col_dendro_group").remove()}},function(t,e,r){"use strict";var o=r(27),a=r(3),n=r(35);t.exports=function(t){d3.select(t.root+" .row_cat_outer_container").empty()?d3.select(t.root+" .row_container").append("g").attr("class","row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").append("g").attr("class","row_cat_container"):d3.select(t.root+" .row_container").select("row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)"),d3.select(t.root+" .row_cat_container").select(".white_bars").empty()?d3.select(t.root+" .row_cat_container").append("rect").attr("class","white_bars").attr("fill",t.viz.background_color).attr("width",t.viz.cat_room.row+"px").attr("height",function(){var e=t.viz.clust.dim.height;return e}):d3.select(t.root+" .row_cat_container").select("class","white_bars").attr("fill",t.viz.background_color).attr("width",t.viz.cat_room.row+"px").attr("height",function(){var e=t.viz.clust.dim.height;return e});var e=a().attr("class","d3-tip").direction("e").offset([5,0]).style("display","block").html(function(e){return o(t,e,this,"row")}),r=d3.select(t.root+" .row_cat_container").selectAll("g").data(t.network_data.row_nodes,function(t){return t.name}).enter().append("g").attr("class","row_cat_group").attr("transform",function(e){var r=_.indexOf(t.network_data.row_nodes_names,e.name);return"translate(0, "+t.viz.y_scale(r)+")"});d3.select(t.root+" .row_cat_container").selectAll(".row_cat_group").call(e),r.append("path").attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,o=1,a=t.viz.y_scale.rangeBand()/2,n=t.viz.cat_room.symbol_width-1,i=t.viz.y_scale.rangeBand(),l="M "+e+","+r+" L "+o+","+a+", L "+n+","+i+" Z";return l}).attr("fill","#eee").style("opacity",t.viz.triangle_opacity);var i,l;t.viz.show_categories.row&&d3.selectAll(t.root+" .row_cat_group").each(function(){l=this,_.each(t.viz.all_cats.row,function(r){var o=parseInt(r.split("-")[1],10),a="row_cat_rect_"+String(o);i=d3.select(l).select("."+a).empty()?d3.select(l).append("rect").attr("class",a).attr("cat",r):d3.select(l).select("."+a),i.attr("width",t.viz.cat_room.symbol_width).attr("height",t.viz.y_scale.rangeBand()).style("fill",function(e){var o=t.viz.cat_colors.row[r][e[r]];return o}).attr("x",function(){var e=t.viz.cat_room.symbol_width+t.viz.uni_margin/2;return e+"px"}).attr("transform",function(){var e=t.viz.cat_room.symbol_width+t.viz.cat_room.separation,r=o*e;return"translate("+r+",0)"}).style("opacity",t.viz.cat_colors.opacity).on("mouseover",e.show).on("mouseout",function(){e.hide(this),n(t),d3.select(this).classed("hovering",!1)})})})}},function(t,e,r){"use strict";var o=r(7);t.exports=function(t){var e=t.viz.dendro_room.row+t.viz.uni_margin,r=t.viz.clust.margin.left+t.viz.clust.dim.width,a=t.viz.clust.margin.top;d3.select(t.root+" .row_dendro_outer_container").empty()?(d3.select(t.root+" .viz_svg").append("g").attr("class","row_dendro_outer_container").attr("transform","translate("+r+","+a+")"),d3.select(t.root+" .row_dendro_outer_container").append("rect").classed("row_dendro_spillover",!0).attr("fill",t.viz.background_color).attr("width",e+"px").attr("height",t.viz.svg_dim.height),d3.select(t.root+" .row_dendro_outer_container").append("g").attr("class","row_dendro_container").attr("transform","translate("+t.viz.uni_margin/2+",0)")):(d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+r+","+a+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",e+"px").attr("height",t.viz.svg_dim.height)),o(t),"clust"!=t.viz.inst_order.col&&d3.selectAll(t.root+" .row_dendro_group").remove()}},function(t,e){"use strict";t.exports=function(t){_.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",t.viz.cat_colors.opacity)})}},function(t,e,r){"use strict";var o=r(1),a=r(11);t.exports=function(t,e,r){var n,i,l=_.keys(r);_.each(l,function(t){n=r[t],/[^a-z_]/i.test(n)&&(n=parseInt(n,10)),i=!1,_.each(e,function(e){o.has(e,t)&&(i=!0)}),i&&(e=_.filter(e,function(e){return e[t]==n}))});var s,c,d=[],u=!1;return _.each(e,function(e){s=!0,_.each(_.keys(t.viz.possible_filters),function(r){c=a(t.viz.filter_data,r),e[r]!=c&&(s=!1)}),s?u===!1&&(u=!0,d.push(e)):d.push(e)}),d}},function(t,e,r){"use strict";var o=r(109);t.exports=function(t){var e;if(d3.select(window).on("resize",null),t.viz.resize&&d3.select(window).on("resize",function(){d3.select(t.viz.viz_svg).style("opacity",.5);var e=500;t.viz.run_trans===!0&&(e=2500),setTimeout(o,e,t)}),t.viz.expand_button){d3.select(t.root+" .expand_button").on("click",null);var r=.4;e=d3.select(t.root+" .expand_button").empty()?d3.select(t.viz.viz_svg).append("text").attr("class","expand_button"):d3.select(t.root+" .expand_button"),e.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-family","FontAwesome").attr("font-size","30px").text(function(){return t.viz.expand===!1?"":""}).attr("y","25px").attr("x","25px").style("cursor","pointer").style("opacity",r).on("mouseover",function(){d3.select(this).style("opacity",.75)}).on("mouseout",function(){d3.select(this).style("opacity",r)}).on("click",function(){t.viz.expand===!1?(d3.select(this).text(function(){return""}),t.viz.expand=!0,d3.selectAll(t.root+" .borders").style("fill","white"),d3.select(t.root+" .sidebar_wrapper").style("display","none")):(d3.select(this).text(function(){return""}),t.viz.expand=!1,d3.selectAll(t.root+" .borders").style("fill","#eee"),d3.select(t.root+" .viz_wrapper").style("width","100px"),d3.select(t.root+" .sidebar_wrapper").style("display","block")),d3.select(t.viz.viz_svg).style("opacity",.5);var e=500;1==t.viz.run_trans&&(e=2500),setTimeout(o,e,t)})}}},function(t,e,r){"use strict";var o=r(1),a=r(88),n=r(45),i=r(47),l=r(90);t.exports=function(t,e){var r,s=t.network_data.col_nodes,c=t.network_data.col_nodes_names,d=t.viz.x_scale.rangeBand()/2+t.viz.border_width,u=.36*t.viz.x_scale.rangeBand();d3.select(t.root+" .col_container").empty()?(r=d3.select(t.viz.viz_svg).append("g").attr("class","col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),r.append("rect").attr("fill",t.viz.background_color).attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col).attr("class","white_bars"),r.append("g").attr("class","col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")").append("g").attr("class","col_zoom_container")):(r=d3.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),r.select(".white_bars").attr("fill",t.viz.background_color).attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),r.select(t.root+" .col_label_outer_container"));var v=d3.select(t.root+" .col_zoom_container").selectAll(".col_label_text").data(s,function(t){return t.name}).enter().append("g").attr("class","col_label_text").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}),h=v.append("g").attr("class","col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+d+") rotate(45)").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)});o.has(t.network_data.col_nodes[0],"value")&&h.append("rect").attr("class","col_bars").attr("width",function(e){var r=0;return e.value>0&&(r=t.labels.bar_scale_col(e.value)),r}).attr("height",.66*t.viz.x_scale.rangeBand()).style("fill",function(e){return e.value>0?t.matrix.bar_colors[0]:t.matrix.bar_colors[1]}).attr("opacity",.6),h.append("text").attr("x",0).attr("y",.64*t.viz.x_scale.rangeBand()).attr("dx",t.viz.border_width).attr("text-anchor","start").attr("full_name",function(t){
return t.name}).style("font-size",t.labels.default_fs_col+"px").text(function(t){return o.normal_name(t)}).style("opacity",0).transition().delay(e).duration(e).style("opacity",1),l(t),h.append("path").style("stroke-width",0).attr("d",function(){var e=-t.viz.border_width,r=0,o=t.viz.x_scale.rangeBand()-u,a=-(t.viz.x_scale.rangeBand()-u+t.viz.border_width),n=-t.viz.border_width,i="M "+e+",0 L "+a+","+r+", L "+n+","+o+" Z";return i}).attr("fill","#eee").style("opacity",0).transition().delay(e).duration(e).style("opacity",t.viz.triangle_opacity),d3.selectAll(t.root+" .col_label_text").on("click",function(e){"function"==typeof t.click_label?(t.click_label(e.name,"col"),a(t,this,e.ini)):t.tile_click_hlight&&a(t,this,e.ini)}).on("dblclick",function(e){var r="__data__",o=this[r].name;if(t.sim_mat){n(t,this,o);var l=d3.selectAll(t.root+" .row_label_group").filter(function(t){return t.name==o})[0][0];i(t,l,o)}else n(t,this,o);t.tile_click_hlight&&a(t,this,e.ini)})}},function(t,e,r){"use strict";var o=r(1),a=r(89),n=r(47),i=r(45),l=r(91);t.exports=function(t,e){var r,s=t.network_data.row_nodes,c=t.network_data.row_nodes_names;r=d3.select(t.viz.viz_svg+" .row_container").empty()?d3.select(t.viz.viz_svg).append("g").attr("class","row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"):d3.select(t.viz.viz_svg).select(".row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .row_white_background").empty()&&r.append("rect").classed("row_white_background",!0).classed("white_bars",!0).attr("fill",t.viz.background_color).attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),d3.select(t.root+" .row_label_container").empty()?r.append("g").attr("class","row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").append("g").attr("class","row_label_zoom_container"):r.select(t.root+" .row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)");var d=d3.select(t.root+" .row_label_zoom_container").selectAll("g").data(s,function(t){return t.name}).enter().append("g").attr("class","row_label_group").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"});d3.select(t.root+" .row_label_zoom_container").selectAll(".row_label_group").on("dblclick",function(e){var r="__data__",o=this[r].name;if(t.sim_mat){n(t,this,o);var l=d3.selectAll(t.root+" .col_label_text").filter(function(t){return t.name==o})[0][0];i(t,l,o)}else n(t,this,o);t.tile_click_hlight&&a(this,e.ini)}),l(t),d.insert("rect").style("opacity",0),d.append("text").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row).attr("text-anchor","end").style("font-size",t.labels.default_fs_row+"px").text(function(t){return o.normal_name(t)}).attr("pointer-events","none").style("opacity",0).transition().delay(e).duration(e).style("opacity",1),d.each(function(){var e=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",e.x).attr("y",0).attr("width",e.width).attr("height",t.viz.y_scale.rangeBand()).style("fill",function(){var t="yellow";return t}).style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),o.has(t.network_data.row_nodes[0],"value")&&d.append("rect").attr("class","row_bars").attr("width",function(e){var r=0;return r=t.labels.bar_scale_row(Math.abs(e.value))}).attr("x",function(e){var r=0;return r=-t.labels.bar_scale_row(Math.abs(e.value))}).attr("height",t.viz.y_scale.rangeBand()).attr("fill",function(e){return e.value>0?t.matrix.bar_colors[0]:t.matrix.bar_colors[1]}).attr("opacity",.4),d3.selectAll(t.root+" .row_label_group").on("click",function(e){"function"==typeof t.click_label?(t.click_label(e.name,"row"),a(t,this,e.ini)):t.tile_click_hlight&&a(t,this,e.ini)})}},function(t,e,r){"use strict";var o=r(98),a=r(36);t.exports=function(t,e,r){var n,i=e.views,l=!1;_.has(i[0],"enr_score_type")&&(l=!0),i=a(t,i,r),l&&0==i.length&&(r={N_row_sum:"all",N_col_sum:"10"},i=e.views,i=a(t,i,r)),n=i[0];var s;if("undefined"!=typeof n){var c=n.nodes,d=e.links;s=o(t,c,d,i)}else s=e;return s.views=e.views,s}},function(t,e,r){"use strict";var o=r(40),a=r(117),n=r(128);t.exports=function(t,e,r){a(e);var i=jQuery.extend(!0,{},t),l=o(e,i.network_data,r),s=n(t,e,l);return s}},function(t,e){"use strict";t.exports=function(t){var e=Math.abs(_.max(t.network_data.col_nodes,function(t){return Math.abs(t.value)}).value);return t.labels.bar_scale_col=d3.scale.linear().domain([0,e]).range([0,.75*t.viz.norm_labels.width.col]),e=Math.abs(_.max(t.network_data.row_nodes,function(t){return Math.abs(t.value)}).value),t.labels.bar_scale_row=d3.scale.linear().domain([0,e]).range([0,t.viz.norm_labels.width.row]),t}},function(t,e){"use strict";t.exports=function(t){var e,r={},o=t.buffer_width,a=window.innerWidth,n=window.innerHeight;return t.viz.expand===!1?(e=t.viz.outer_margins,r.width=a-t.sidebar_width-e.right-o):(e=t.viz.outer_margins,r.width=a-e.right-o),r.top=e.top,r.left=e.left,t.viz.resize?r.height=n-e.top-e.bottom:(t.viz.expand?r.width=t.viz.fixed_size.width:r.width=t.viz.fixed_size.width-t.sidebar_width,r.height=t.viz.fixed_size.height),r}},function(t,e,r){"use strict";var o=r(40),a=r(116),n=r(16),i=r(15),l=r(19),s=r(102),c=r(105),_=r(103),d=r(17),u=r(101),v=r(100),h=r(42),m=r(106),f=r(104),p=r(13),g=r(18);t.exports=function(t){var e=$.extend(!0,{},t),r=e;if(null!==r.ini_view){var w=r.ini_view,z=g(r.network_data.views);r.viz={},r.viz.possible_filters=z.possible_filters,r.viz.filter_data=z.filter_data,w=p(r,w),r.network_data=o(r,r.network_data,w)}return r.labels=s(e,r.network_data),r.viz=c(e,r),r.matrix=_(e,r.viz,r.network_data),a(r),r=l(r),r.viz=v(r.viz),r.viz=n(r.viz),r.viz=i(r.viz),r.sim_mat&&(r.viz.clust.dim.width<=r.viz.clust.dim.height?r.viz.clust.dim.height=r.viz.clust.dim.width:r.viz.clust.dim.width=r.viz.clust.dim.height),r=h(r),r=u(e,r),r=m(r),r=d(r),r.use_sidebar&&(r.sidebar=f(r)),r}},function(t,e,r){"use strict";var o=r(46),a=r(8),n=r(2);t.exports=function(t,e,r){t.viz.inst_order.col="custom",a(t,"col"),d3.selectAll(t.root+" .row_dendro_group").style("opacity",0),d3.selectAll(t.root+" .toggle_row_order .btn").classed("active",!1),t.viz.run_trans=!0;var i=t.matrix.matrix,l=t.network_data.row_nodes,s=t.network_data.col_nodes,c=_.pluck(l,"name"),d=[];s.forEach(function(t){d.push(t.name)});var u=_.indexOf(d,r);d=[],l.forEach(function(t,e){d.push(i[e].row_data[u].value)});var v=d3.range(d.length).sort(function(t,e){return d[e]-d[t]});t.viz.y_scale.domain(v);var h;t.network_data.links.length>t.matrix.def_large_matrix?(h=d3.select(t.root+" .clust_group"),d3.selectAll(t.root+" .row_cat_group").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.select(t.root+" .row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"})):(h=d3.select(t.root+" .clust_group").transition().duration(2500),d3.selectAll(t.root+" .row_cat_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.select(t.root+" .row_label_zoom_container").selectAll(".row_label_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"})),h.selectAll(".row").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.selectAll(t.root+" .col_label_text").select(".highlight_rect").style("opacity",0),d3.select(e).select(".highlight_rect").style("opacity",1),t.network_data.links.forEach(function(e){e.x=t.viz.x_scale(e.target),e.y=t.viz.y_scale(e.source)}),o(t);var m={};m.zoom_x=1,m.zoom_y=1,m.trans_x=0,m.trans_y=0,n(t,m),setTimeout(function(){t.viz.run_trans=!1},2500)}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width,o=e*t.viz.border_width/t.viz.zoom_switch;d3.select(t.root+" .top_hlight").attr("width",t.viz.x_scale.rangeBand()).attr("height",o).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*o).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*o+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*o).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.x_scale.rangeBand()-r;return"translate("+e+","+.99*o+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*r}).attr("height",o).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,a=t.viz.y_scale.rangeBand()-o;return"translate("+e+","+a+")"})}},function(t,e,r){"use strict";var o=r(46),a=r(8),n=r(2);t.exports=function(t,e,r){t.viz.inst_order.row="custom",a(t,"col"),d3.selectAll(t.root+" .col_dendro_group").style("opacity",0),d3.selectAll(t.root+" .toggle_col_order .btn").classed("active",!1),t.viz.run_trans=!0;var i=t.matrix.matrix,l=t.network_data.row_nodes,s=t.network_data.col_nodes,c=_.pluck(s,"name"),d=[];l.forEach(function(t){d.push(t.name)}),r=_.indexOf(d,r),d=[],s.forEach(function(t,e){d.push(i[r].row_data[e].value)});var u=d3.range(d.length).sort(function(t,e){return d[e]-d[t]});t.viz.x_scale.domain(u);var v;t.network_data.links.length>t.matrix.def_large_matrix?(v=d3.select(t.root+" .clust_group"),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_text").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+")rotate(-90)"}),d3.selectAll(t.root+" .col_cat_group").attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+",0)"})):(v=d3.select(t.root+" .clust_group").transition().duration(2500),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_text").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+")rotate(-90)"}),d3.selectAll(t.root+" .col_cat_group").transition().duration(2500).attr("transform",function(e){var r=_.indexOf(c,e.name);return"translate("+t.viz.x_scale(r)+",0)"})),v.selectAll(".tile").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+",0)"}),v.selectAll(".tile_up").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+",0)"}),v.selectAll(".tile_dn").attr("transform",function(e){return"translate("+t.viz.x_scale(e.pos_x)+",0)"}),d3.selectAll(t.root+" .row_label_group").select("rect").style("opacity",0),d3.select(e).select("rect").style("opacity",1),o(t),t.network_data.links.forEach(function(e){e.x=t.viz.x_scale(e.target),e.y=t.viz.y_scale(e.source)});var h={};h.zoom_x=1,h.zoom_y=1,h.trans_x=0,h.trans_y=0,n(t,h),setTimeout(function(){t.viz.run_trans=!1},2500)}},function(t,e,r){"use strict";var o=r(1);t.exports=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={};r===!1?a.run_transition=!1:a=r,o.has(t.network_data.col_nodes[0],"value")&&e.selectAll(".col_bars").data(t.network_data.col_nodes,function(t){return t.name}).attr("width",function(e){var r=0;return e.value>0&&(r=t.labels.bar_scale_col(e.value)),r}).attr("height",.66*t.viz.rect_width)}},function(t,e){"use strict";t.exports=function(t,e){var r,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={},n=t.viz.duration,i=t.network_data.col_nodes,l=t.network_data.col_nodes_names;o===!1?a.run_transition=!1:a=o,a.run_transition?(r=e.transition().delay(a.update).duration(n),e.selectAll(".col_label_text").data(i,function(t){return t.name}).transition().delay(a.update).duration(n).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"})):(r=e,e.selectAll(".col_label_text").data(i,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}));var s=t.viz.x_scale.rangeBand()/2+t.viz.border_width;r.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),r.select(t.root+" .col_container").select(".white_bars").attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),r.select(t.root+" .col_container").select(".col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),r.selectAll(".col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+s+") rotate(45)"),r.selectAll(".col_label_group").select("text").attr("y",.6*t.viz.x_scale.rangeBand()).attr("dx",2*t.viz.border_width)}},function(t,e,r){"use strict";var o=r(1);t.exports=function(t,e){e.selectAll(".col_label_group").select("text").style("font-size",t.labels.default_fs_col+"px").text(function(t){return o.normal_name(t)}),e.selectAll(".col_label_group").each(function(){d3.select(this).select("text")[0][0].getBBox()})}},function(t,e){"use strict";t.exports=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],o=e.selectAll(".col_label_group").select("path"),a={},n=t.viz.duration;r===!1?a.run_transition=!1:a=r;var i;i=a.run_transition?o.transition().delay(a.update).duration(n):o;var l=.36*t.viz.x_scale.rangeBand();i.attr("d",function(){var e=-t.viz.border_width,r=0,o=t.viz.x_scale.rangeBand()-l,a=-(t.viz.x_scale.rangeBand()-l+t.viz.border_width),n=-t.viz.border_width,i="M "+e+",0 L "+a+","+r+", L "+n+","+o+" Z";return i}).attr("fill","#eee")}},function(t,e){"use strict";t.exports=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],o={};r===!1?o.run_transition=!1:o=r;var a,n=t.viz.duration,i=t.network_data.col_nodes,l=t.network_data.col_nodes_names;o.run_transition?(a=e.transition().delay(o.update).duration(n),e.selectAll(".col_cat_group").data(i,function(t){return t.name}).transition().delay(o.update).duration(n).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}),e.selectAll(".col_dendro_group").data(i,function(t){return t.name}).transition().delay(o.update).duration(n).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"})):(a=e,e.selectAll(".col_cat_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}),d3.select(t.root).selectAll(".col_dendro_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}));var s,c;_.each(["row","col"],function(e){var r=t.viz.all_cats[e].length;for(s=0;r>s;s++)c="."+e+"_cat_rect_"+String(s),"row"===e?a.selectAll(c).attr("height",t.viz.y_scale.rangeBand()):a.selectAll(c).attr("width",t.viz.x_scale.rangeBand())});var d=t.viz.clust.margin.left+t.viz.clust.dim.width,u=t.viz.clust.margin.top,v=t.viz.dendro_room.row+t.viz.uni_margin;d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+d+","+u+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",v+"px").attr("height",t.viz.svg_dim.height),d=t.viz.clust.margin.left,u=t.viz.clust.margin.top+t.viz.clust.dim.height;var h=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",h+"px"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover_top").attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")")}},function(t,e,r){"use strict";var o=r(42);t.exports=function(t,e){t=o(t),e.selectAll(".row_bars").attr("width",function(e){var r=0;return r=t.labels.bar_scale_row(Math.abs(e.value))}).attr("x",function(e){var r=0;return r=-t.labels.bar_scale_row(Math.abs(e.value))}).attr("height",t.viz.y_scale.rangeBand())}},function(t,e){"use strict";t.exports=function(t,e){var r,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={},n=t.viz.duration,i=t.network_data.row_nodes,l=t.network_data.row_nodes_names;o===!1?a.run_transition=!1:a=o,a.run_transition?(e.selectAll(".row_label_group").data(i,function(t){return t.name}).transition().delay(a.update).duration(n).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e.transition().delay(a.update).duration(n)):(e.selectAll(".row_label_group").data(i,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e),r.select(t.root+" .row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),r.select(t.root+" .row_container").select(".white_bars").attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),r.select(t.root+" .row_container").select(".row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)")}},function(t,e){"use strict";t.exports=function(t,e){var r,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={},n=t.viz.duration;o===!1?a.run_transition=!1:a=o,r=a.run_transition?e.transition().delay(a.update).duration(n):e,r.select(".row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").select("white_bars").attr("width",t.viz.cat_room.row+"px").attr("height",function(){var e=t.viz.clust.dim.height;return e});var i=t.viz.clust.margin.left+t.viz.clust.dim.width,l=t.viz.clust.margin.top;r.select(".row_dendro_outer_container").attr("transform","translate("+i+","+l+")"),i=t.viz.clust.margin.left,l=t.viz.clust.margin.top+t.viz.clust.dim.height,r.select(" .col_dendro_outer_container").attr("transform",function(){return"translate("+i+","+l+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={},n=t.duration;o===!1?a.run_transition=!1:a=o,r=a.run_transition?e.transition().delay(a.update).duration(n):e,r.select(t.root+" .right_slant_triangle").attr("transform","translate("+t.clust.dim.width+","+t.norm_labels.width.col+")"),r.select(t.root+" .left_slant_triangle").attr("transform","translate(-1,"+t.norm_labels.width.col+")"),r.select(t.root+" .top_left_white").attr("width",t.clust.margin.left).attr("height",t.clust.margin.top);var i=t.clust.margin.left+t.clust.dim.width+t.uni_margin+t.dendro_room.row,l=t.norm_labels.margin.top+t.norm_labels.width.col;r.select(t.root+" .right_spillover").attr("transform",function(){return"translate("+i+","+l+")"}).attr("height",t.svg_dim.height+"px");var s=t.clust.margin.left+t.clust.dim.width,c=l,_=t.dendro_room.row+t.uni_margin,d=t.cat_room.col+t.uni_margin;d3.select(t.root+" .dendro_row_spillover").attr("width",_).attr("height",d).attr("transform",function(){return"translate("+s+","+c+")"}),s=0,c=t.clust.margin.top+t.clust.dim.height,_=t.clust.margin.left,d=10*t.clust.dim.height,r.select(".dendro_col_spillover").attr("width",_).attr("height",d).attr("transform",function(){return"translate("+s+","+c+")"}),s=t.clust.margin.left+t.clust.dim.width,c=t.clust.margin.top+t.clust.dim.height,_=t.cat_room.col+t.clust.dim.width,d=t.cat_room.row+t.uni_margin,r.select(".dendro_corner_spillover").attr("width",_).attr("height",d).attr("transform",function(){return"translate("+s+","+c+")"}),s=t.clust.margin.left+t.clust.dim.width+t.uni_margin,c=t.norm_labels.margin.top+t.norm_labels.width.col+2.5*t.uni_margin;var u=2.75,v=1.2;t.show_categories.col&&d3.selectAll(t.root+" .col_cat_super").attr("transform",function(e){var r=parseInt(e.split("-")[1],10),o=c+v*t.cat_room.symbol_width*r;return"translate("+s+","+o+")"}),t.show_categories.row&&d3.select(t.root+" .row_cat_label_container").attr("transform",function(){return s=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.symbol_width+u*t.uni_margin,c=t.clust.margin.top-t.uni_margin,"translate("+s+","+c+") rotate(-90)"}),c=t.show_dendrogram?t.clust.margin.top+t.clust.dim.height+t.dendro_room.col:t.clust.margin.top+t.clust.dim.height,r.select(t.root+" .bottom_spillover").attr("width",t.svg_dim.width).attr("height",2*t.svg_dim.height).attr("transform",function(){var t=c;return"translate(0,"+t+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],a={},n=t.viz.duration;o===!1?a.run_transition=!1:a=o,r=a.run_transition?e.transition().delay(a.update).duration(n):e,r.select(".super_col_bkg").attr("height",t.viz.super_labels.dim.width+"px").attr("transform","translate(0,"+t.viz.grey_border_width+")"),r.select(".super_col").attr("transform",function(){var e=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row,r=t.viz.super_labels.dim.width;return"translate("+e+","+r+")"}),r.select(".super_row_bkg").attr("width",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.grey_border_width+",0)"),r.select(".super_row").attr("transform",function(){var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"})}},function(t,e,r){"use strict";var o=r(25);t.exports=function(t,e,r){function a(e){if(-1!==i.indexOf(e)){d3.selectAll(t.root+" .row_label_group").select("rect").style("opacity",0);var a=_.indexOf(i,e),n=t.viz.y_scale(a),l=t.viz.clust.dim.height/2-n;o(t,0,l,t.viz.zoom_switch),d3.selectAll(t.root+" .row_label_group").filter(function(t){return t[r]===e}).select("rect").style("opacity",1)}}var n,i=[];for(n=0;n<e.length;n++)i.push(e[n][r]);return{find_entity:a,get_entities:i}}},function(t,e,r){"use strict";var o=r(69),a=r(58),n=r(20);t.exports=function(t){var e=a(t,t.network_data.row_nodes,"name");$(t.root+" .gene_search_box").autocomplete({source:e.get_entities}),$(t.root+" .gene_search_box").keyup(function(r){if(13===r.keyCode){var o=$(t.root+" .gene_search_box").val();e.find_entity(o)}}),$(t.root+" .submit_gene_button").off().click(function(){var r=$(t.root+" .gene_search_box").val();e.find_entity(r)});var r;r=t.sim_mat?["both"]:["row","col"],_.each(r,function(e){$(t.root+" .slider_"+e).slider({value:.5,min:0,max:1,step:.1,slide:function(r,a){$("#amount").val("$"+a.value);var n=10*a.value;"both"!=e?o(t,e,n):(o(t,"row",n),o(t,"col",n))}}),$(t.root+" .toggle_"+e+"_order .btn").off().click(function(r){var o=$(r.target).attr("name").replace("_row","").replace("_col","");d3.selectAll(t.root+" .toggle_"+e+"_order .btn").classed("active",!1),d3.select(this).classed("active",!0),"both"!=e?n(t,o,e):(n(t,o,"row"),n(t,o,"col"))})}),_.each(["row","col"],function(e){t.viz.show_categories[e]&&d3.selectAll(t.root+" ."+e+"_cat_super").on("dblclick",function(){var r=this.__data__.replace("-","_")+"_index";t.viz.sim_mat?(n(t,r,"row"),n(t,r,"col")):n(t,r,e)})})}},function(t,e){"use strict";t.exports=function(t,e){var r;"row"===e?r="group":"col"===e&&(r="text");var o=d3.selectAll(t.root+" ."+e+"_label_"+r).filter(function(){return"none"!=d3.select(this).style("display")})[0].length;return o}},function(t,e){"use strict";t.exports=function(t){var e=1,r=0,o=0,a=t.viz.clust.dim.height/2,n=-(e-1)*a;d3.select(t.root+" .clust_group").attr("transform","translate("+[0,0+n]+") scale(1,"+e+")translate("+[r,o]+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,n]+") scale("+e+","+e+")translate("+[0,o]+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,n]+") scale(1,"+e+")translate("+[0,o]+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[0,n]+") scale("+e+","+e+")translate("+[t.viz.uni_margin/2,o]+")"),d3.select(t.root+" .col_zoom_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_cat_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_dendro_container").attr("transform"," scale(1,1)translate("+[r,t.viz.uni_margin/2]+")")}},function(t,e,r){"use strict";var o=r(130);t.exports=function(t){var e={};e.zoom_x=d3.event.scale,e.zoom_y=d3.event.scale,e.trans_x=d3.event.translate[0]-t.viz.clust.margin.left,e.trans_y=d3.event.translate[1]-t.viz.clust.margin.top,o(t,e)}},function(t,e){"use strict";function r(){return"#EEE"}function o(t){return n[t%a()]}function a(){return n.length}var n;n=d3.scale.category20b().range(),t.exports={get_default_color:r,get_random_color:o,get_num_colors:a}},function(t,e,r){"use strict";var o=r(1),a=r(63),n=r(99),i=r(18),l=r(11),s=r(66),c=r(65);t.exports=function(t){var e=s(),r=o.extend(e,t);r.ini_expand?r.expand_button=!1:r.expand_button=!0,r.network_data=t.network_data,r.network_data.row_nodes.forEach(function(t){t.name=t.name.replace(/_/g," ")}),r.network_data.col_nodes.forEach(function(t){t.name=t.name.replace(/_/g," ")}),r.network_data.row_nodes_names=_.pluck(r.network_data.row_nodes,"name"),r.network_data.col_nodes_names=_.pluck(r.network_data.col_nodes,"name"),r.sim_mat=c(r);var d=i(r.network_data.views),u={};_.each(_.keys(d.possible_filters),function(t){var e=l(d.filter_data,t);u[t]=e}),_.has(r.network_data,"views")&&r.network_data.views.forEach(function(t){_.each(_.keys(d.possible_filters),function(e){_.has(t,e)||(t[e]=u[e])});var e=t.nodes;e.row_nodes.forEach(function(t){t.name=t.name.replace(/_/g," ")}),e.col_nodes.forEach(function(t){t.name=t.name.replace(/_/g," ")})});var v=r.network_data.col_nodes,h=r.network_data.row_nodes;if(r.network_data.links.forEach(function(t){t.name=h[t.source].name+"_"+v[t.target].name,t.row_name=h[t.source].name,t.col_name=v[t.target].name}),r.transpose){r.network_data=n(r.network_data);var m=t.col_label,f=t.row_label;t.row_label=m,t.col_label=f}o.is_undefined(t.row_label)||o.is_undefined(t.col_label)||(r.super_labels=!0,r["super"]={},r["super"].row=t.row_label,r["super"].col=t.col_label),r.inst_order={},!o.is_undefined(t.order)&&o.is_supported_order(t.order)?(r.inst_order.row=t.order,r.inst_order.col=t.order):(r.inst_order.row="clust",r.inst_order.col="clust"),!o.is_undefined(t.row_order)&&o.is_supported_order(t.row_order)&&(r.inst_order.col=t.row_order),!o.is_undefined(t.col_order)&&o.is_supported_order(t.col_order)&&(r.inst_order.row=t.col_order);var p=o.has(r.network_data.row_nodes[0],"group"),g=o.has(r.network_data.col_nodes[0],"group");r.show_dendrogram=p||g,r.show_categories={},r.all_cats={},r.cat_colors={},r.cat_names={};var w=0;return _.each(["row","col"],function(t){r.show_categories[t]=!1,r.all_cats[t]=[];var e=_.keys(r.network_data[t+"_nodes"][0]);_.each(e,function(e){e.indexOf("cat-")>=0&&(r.show_categories[t]=!0,r.all_cats[t].push(e))});var o;r.show_categories[t]&&(r.cat_colors[t]={},r.cat_names[t]={},_.each(r.all_cats[t],function(e){var n=": ";_.each(r.network_data[t+"_nodes"],function(a){a[e].indexOf(n)>0?(o=a[e].split(n)[0],r.cat_names[t][e]=o):r.cat_names[t][e]=e});var i=_.uniq(_.pluck(r.network_data[t+"_nodes"],e)).sort();r.cat_colors[t][e]={},_.each(i,function(o,n){var i=a.get_random_color(n+2+w);r.cat_colors[t][e][o]=i,o.indexOf("Not ")>=0&&(r.cat_colors[t][e][o]="#eee"),w+=1})})),r.sim_mat&&(r.cat_colors.row=r.cat_colors.col)}),r.show_categories.col&&(r.cat_dict={},v.forEach(function(t){o.has(r.cat_dict,t.cat)||(r.cat_dict[t.cat]=[]),r.cat_dict[t.cat].push(t.name)})),o.has(r.network_data.links[0],"value_orig")?r.keep_orig=!0:r.keep_orig=!1,r}},function(t,e){"use strict";t.exports=function(t){var e=!1,r=t.network_data.row_nodes_names.length,o=t.network_data.col_nodes_names.length;if(r==o){var a=t.network_data.row_nodes_names,n=t.network_data.col_nodes_names;e=!0,_.each(a,function(t){var r=a.indexOf(t);t!==n[r]&&(e=!1)})}return e&&(t.expand_button=!1),e}},function(t,e){"use strict";t.exports=function(){var t={row_label_scale:1,col_label_scale:1,super_labels:!1,show_label_tooltips:!0,show_tile_tooltips:!0,transpose:!1,tile_colors:["#FF0000","#1C86EE"],bar_colors:["#FF0000","#1C86EE"],outline_colors:["orange","black"],highlight_color:"#FFFF00",tile_title:!1,input_domain:0,opacity_scale:"linear",do_zoom:!0,is_zoom:0,background_color:"#FFFFFF",super_border_color:"#F5F5F5",outer_margins:{top:0,bottom:0,left:0,right:0},ini_expand:!1,grey_border_width:2,tile_click_hlight:!1,super_label_scale:1,make_tile_tooltip:function(t){return t.info},ini_view:null,use_sidebar:!0,title:null,about:null,sidebar_width:170,sidebar_icons:!0,row_search_placeholder:"Row",buffer_width:15,show_sim_mat:!1};return t}},function(t,e){"use strict";t.exports=function(t){var e={},r=t.group_level.col,o=t.network_data.col_nodes,a=t.network_data.col_nodes_names;_.each(o,function(o){var n=o.group[r],i=_.indexOf(a,o.name),l=t.viz.x_scale(i),s=l+t.viz.x_scale.rangeBand();_.has(e,n)===!1&&(e[n]={},e[n].name_top=o.name,e[n].name_bot=o.name,e[n].pos_top=l,e[n].pos_bot=s,e[n].pos_mid=(l+s)/2,e[n].name=n),l<e[n].pos_top&&(e[n].name_top=o.name,e[n].pos_top=l,e[n].pos_mid=(l+e[n].pos_bot)/2),s>e[n].pos_bot&&(e[n].name_bot=o.name,e[n].pos_bot=s,e[n].pos_mid=(e[n].pos_top+s)/2)});var n=[];return _.each(e,function(t){n.push(t)}),n}},function(t,e){"use strict";t.exports=function(t){var e={},r=t.group_level.row,o=t.network_data.row_nodes,a=t.network_data.row_nodes_names;_.each(o,function(o){var n=o.group[r],i=_.indexOf(a,o.name),l=t.viz.y_scale(i),s=l+t.viz.y_scale.rangeBand();_.has(e,n)===!1&&(e[n]={},e[n].name_top=o.name,e[n].name_bot=o.name,e[n].pos_top=l,e[n].pos_bot=s,e[n].pos_mid=(l+s)/2,e[n].name=n),l<e[n].pos_top&&(e[n].name_top=o.name,e[n].pos_top=l,e[n].pos_mid=(l+e[n].pos_bot)/2),s>e[n].pos_bot&&(e[n].name_bot=o.name,e[n].pos_bot=s,e[n].pos_mid=(e[n].pos_top+s)/2)});var n=[];return _.each(e,function(t){n.push(t)}),n}},function(t,e,r){"use strict";var o=r(7),a=r(6);t.exports=function(t,e,r){"row"===e?t.group_level.row=r:"col"===e&&(t.group_level.col=r);var n=!0;o(t,n),a(t,n)}},function(t,e){"use strict";t.exports=function(t,e,r,o){var a,n=.2,i=.7;"row"==r?(d3.select(e).style("opacity",i),d3.select(t.root+" .clust_group").append("rect").style("width",t.viz.clust.dim.width+"px").style("height",o.pos_top+"px").style("fill","black").style("opacity",n).classed("dendro_shadow",!0),a=t.viz.clust.dim.height-o.pos_bot,d3.select(t.root+" .clust_group").append("rect").style("width",t.viz.clust.dim.width+"px").style("height",a+"px").attr("transform","translate(0,"+o.pos_bot+")").style("fill","black").style("opacity",n).classed("dendro_shadow",!0)):"col"===r&&(d3.select(e).style("opacity",i),d3.select(t.root+" .clust_group").append("rect").style("width",o.pos_top+"px").style("height",t.viz.clust.dim.height+"px").style("fill","black").style("opacity",n).classed("dendro_shadow",!0),a=t.viz.clust.dim.width-o.pos_bot,d3.select(t.root+" .clust_group").append("rect").style("width",a+"px").style("height",t.viz.clust.dim.height+"px").attr("transform","translate("+o.pos_bot+",0)").style("fill","black").style("opacity",n).classed("dendro_shadow",!0))}},function(t,e){"use strict";t.exports=function(t,e,r){var o=t.network_data.row_nodes_names,a=t.network_data.col_nodes_names;d3.selectAll(t.root+" .horz_lines").remove(),d3.selectAll(t.root+" .vert_lines").remove(),d3.select(t.root+" .clust_group").selectAll(".horz_lines").data(e,function(t){return t.name}).enter().append("g").attr("class","horz_lines").attr("transform",function(e){var r=_.indexOf(o,e.name);return"translate(0,"+t.viz.y_scale(r)+") rotate(0)"}).append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){var e;return e=t.viz.zoom_switch>1?t.viz.border_width/t.viz.zoom_switch:t.viz.border_width,e+"px"}).style("stroke","white"),d3.select(t.root+" .clust_group").selectAll(".vert_lines").data(r).enter().append("g").attr("class","vert_lines").attr("transform",function(e){
var r=_.indexOf(a,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}).append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){var e;return e=t.viz.zoom_switch_y>1?t.viz.border_width/t.viz.zoom_switch_y:t.viz.border_width,e+"px"}).style("stroke","white")}},function(t,e,r){"use strict";var o=r(80),a=r(73),n=r(127),i=r(5),l=r(4);t.exports=function(t,e,r,s,c,d){var u=e.row_data,v=_.filter(u,function(t){return 0!=t.value}),h=d3.select(c).selectAll(".tile").data(v,function(t){return t.col_name});o(t,r,h,u,c);var m=h.on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];i(t,this,d,r)}).on("mouseout",function(){l(t,this,d)}),f=t.network_data.col_nodes_names;r.run_transition?m.transition().delay(r.update).duration(s).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){if(_.contains(f,e.col_name)){var r=_.indexOf(f,e.col_name),o=t.viz.x_scale(r)+.5*t.viz.border_width;return"translate("+o+",0)"}}):m.attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){if(_.contains(f,e.col_name)){var r=_.indexOf(f,e.col_name),o=t.viz.x_scale(r)+.5*t.viz.border_width;return"translate("+o+",0)"}}),"updn"==t.matrix.tile_type&&n(t,u,c,r,s,h,d),a(t,r,s,h,d)}},function(t,e,r){"use strict";var o=r(5),a=r(4);t.exports=function(t,e,r,n,i){var l=n.enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).on("mouseover",function(){for(var e=arguments.length,r=Array(e),a=0;e>a;a++)r[a]=arguments[a];o(t,this,i,r)}).on("mouseout",function(){a(t,this,i)}).attr("fill-opacity",0).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"});e.run_transition?l.transition().delay(e.enter).duration(r).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}):l.style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),l.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e,r){"use strict";var o=r(108),a=r(39),n=r(38),i=r(72),l=r(79),s=r(75),c=r(77),d=r(111),u=r(14),v=r(3);t.exports=function(t,e,r){d3.selectAll(t.root+" .d3-tip").style("opacity",0);var h=v().attr("class","d3-tip tile_tip").direction("nw").offset([0,0]).html(function(e){var r,o=String(e.value.toFixed(3));if(t.keep_orig){var a=String(e.value_orig.toFixed(3));r="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+o+"</p><div> original value: "+a+"</div>"}else r="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+o+"</div>";return r});d3.select(t.root+" .clust_group").call(h),d(t);for(var m=t.network_data.row_nodes_names,f=1e3,p=e.row_nodes,g=e.col_nodes,w=e.links,z=w,x=0;x<z.length;x++){var b=z[x];z[x].name=p[b.source].name+"_"+g[b.target].name}var y=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name});r.run_transition?y.transition().delay(r.update).duration(f).attr("transform",function(e){var r=_.indexOf(m,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}):y.attr("transform",function(e){var r=_.indexOf(m,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),d3.select(t.root+" .clust_group").selectAll(".row").each(function(e){var o=this;i(t,e,r,f,o,h)}),d3.selectAll(t.root+" .horz_lines").remove(),d3.selectAll(t.root+" .vert_lines").remove(),l(t,r,f),o(t,p,g,w,f,r),c(t,r,f,h),a(t,f),n(t,f),s(t,r,f),u(t)}},function(t,e){"use strict";t.exports=function(t,e,r){var o=t.network_data.row_nodes,a=t.network_data.row_nodes_names,n=t.network_data.col_nodes,i=t.network_data.col_nodes_names;d3.select(t.root+" .clust_group").selectAll(".horz_lines").data(o,function(t){return t.name}).enter().append("g").attr("class","horz_lines").attr("transform",function(e){var r=_.indexOf(a,e.name);return"translate(0,"+t.viz.y_scale(r)+") rotate(0)"}).append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){var e;return e=t.viz.zoom_switch>1?t.viz.border_width/t.viz.zoom_switch:t.viz.border_width,e+"px"}).attr("opacity",0).attr("stroke","white").transition().delay(e.enter).duration(2*r).attr("opacity",1),d3.select(t.root+" .clust_group").selectAll(".vert_lines").data(n).enter().append("g").attr("class","vert_lines").attr("transform",function(e){var r=_.indexOf(i,e.name);return"translate("+t.viz.x_scale(r)+") rotate(-90)"}).append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){var e;return e=t.viz.zoom_switch_y>1?t.viz.border_width/t.viz.zoom_switch_y:t.viz.border_width,e+"px"}).style("stroke","white").attr("opacity",0).transition().delay(e.enter).duration(2*r).attr("opacity",1)}},function(t,e,r){"use strict";var o=r(78),a=r(5),n=r(4);t.exports=function(t,e,r,i,l,s){var c=e.row_data,d=_.filter(c,function(t){return 0!==t.value}),u=d3.select(s).selectAll("rect").data(d,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];a(t,this,l,r)}).on("mouseout",function(){n(t,this,l)});u.style("fill-opacity",0).transition().delay(r.enter).duration(i).style("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),u.attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}),"updn"==t.matrix.tile_type&&o(t,c,s,l,r,i,u)}},function(t,e,r){"use strict";var o=r(76);t.exports=function(t,e,r,a){var n=t.network_data.row_nodes_names,i=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).enter().append("g").attr("class","row").attr("transform",function(e){var r=_.indexOf(n,e.name);return"translate(0,"+t.viz.y_scale(r)+")"});i.each(function(n){o(t,n,e,r,a,this)})}},function(t,e,r){"use strict";var o=r(10),a=r(9);t.exports=function(t,e,r,n,i,l,s){var c=_.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn}),d=d3.select(r).selectAll(".tile_up").data(c,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return o(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}).style("fill",function(){return t.matrix.tile_colors[0]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&n.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&n.hide()});d.style("fill-opacity",0).transition().delay(i.enter).duration(l).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r});var u=d3.select(r).selectAll(".tile_dn").data(c,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return a(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}).style("fill",function(){return t.matrix.tile_colors[1]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&n.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&n.hide()});u.style("fill-opacity",0).transition().delay(i.enter).duration(l).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}),s.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){"use strict";t.exports=function(t,e,r){var o=t.network_data.row_nodes,a=t.network_data.col_nodes,n=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).exit();e.run_transition?n.transition().duration(r).style("opacity",0).remove():n.style("opacity",0).remove(),d3.selectAll(t.root+" .row_label_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_group").data(a,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_cat_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_dendro_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_text").data(a,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .horz_lines").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .vert_lines").data(a,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_cat_group").data(a,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_dendro_group").data(a,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove()}},function(t,e){"use strict";t.exports=function(t,e,r,o,a){if(e.run_transition?r.exit().transition().duration(300).attr("fill-opacity",0).remove():r.exit().attr("fill-opacity",0).remove(),"updn"==t.matrix.tile_type){var n=_.filter(o,function(t){return 0!=t.value_up||0!=t.value_dn}),i=d3.select(a).selectAll(".tile_up").data(n,function(t){return t.col_name});e.run_transition?i.exit().transition().duration(300).attr("fill","0").remove():i.exit().attr("fill",0).remove();var l=d3.select(a).selectAll(".tile_dn").data(n,function(t){return t.col_name});e.run_transition?l.exit().transition().duration(300).attr("fill",0).remove():l.exit().attr("fill",0).remove()}}},function(t,e,r){"use strict";var o=r(41),a=r(85),n=r(82),i=r(13);t.exports=function(t,e,r,l){var s=$(e.root+" .slider_"+r).slider("value"),c=l[s][r];a(e,r,c),e=n(e);var d={};if(d[r]=c,d=i(e,d),_.has(l[0],"enr_score_type")){var u=d3.select(e.root+" .toggle_enr_score_type").attr("current_state");d.enr_score_type=u}return e=o(t,e,d)}},function(t,e){"use strict";t.exports=function(t){var e;return _.each(["row","col"],function(r){e="row"===r?"col":"row",d3.select(t.root+" .toggle_"+e+"_order .active").empty()===!1?t.viz.inst_order[r]=d3.select(t.root+" .toggle_"+e+"_order").select(".active").attr("name"):t.viz.inst_order[r]="clust"}),t}},function(t,e,r){"use strict";var o=r(41),a=r(13);t.exports=function(t,e,r,n){var i=n.append("div").classed("categorical_filter",!0).classed("toggle_"+r,!0).style("width",e.sidebar.slider.width+"px").style("margin-left",e.sidebar.slider.margin_left+"px").classed("btn-group-vertical",!0).style("width","135px").style("margin-left","0px").style("margin-top","10px").attr("current_state","combined_score"),l=e.viz.filter_data[r],s={combined_score:"Combined Score",pval:"P-Value",zscore:"Z-score"};i.selectAll("button").data(l).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed(".filter_button",!0).classed("sidebar_text",!0).classed("active",function(t){var e=!1;return"combined_score"==t&&(e=!0),e}).attr("name",function(t){return t}).html(function(t){return s[t]}),$(e.root+" .categorical_filter .btn").off().click(function(){d3.selectAll(e.root+" .categorical_filter .btn").classed("active",!1),d3.select(this).classed("active",!0);var r=d3.select(this).attr("name"),n={enr_score_type:r};n=a(e,n),o(t,e,n),d3.select(e.root+" .toggle_enr_score_type").attr("current_state",r)})}},function(t,e,r){"use strict";var o=r(12),a=r(81),n=r(11),i=r(36);t.exports=function(t,e,r,l){var s={},c=_.keys(e.viz.possible_filters);_.each(c,function(t){if(t!=r){var o=n(e.viz.filter_data,t);s[t]=o}});var d=o(e,r);l.append("div").classed("viz_medium_text",!0).classed("sidebar_text",!0).classed("title_"+r,!0).text(d.text+d.state+d.suffix),l.append("div").classed("slider_"+r,!0).classed("slider",!0).style("width",e.sidebar.slider.width+"px").style("margin-left",e.sidebar.slider.margin_left+"px").attr("current_state",d.state);var u=e.network_data.views,v=i(e,u,s);v=v.sort(function(t,e){return e[r]-t[r]});var h=v.length-1;$(e.root+" .slider_"+r).slider({value:0,min:0,max:h,step:1,stop:function(){e=a(t,e,r,v)}})}},function(t,e,r){"use strict";var o=r(12);t.exports=function(t,e,r){var a,n;d3.select(t.root+" .slider_"+e).attr("current_state",r),_.each(_.keys(t.viz.possible_filters),function(r){if(a=e.indexOf("row")>-1?"row":e.indexOf("col")>-1?"col":"neither",n=r.indexOf("row")>-1?"row":r.indexOf("col")>-1?"col":"neither",e!=r&&"neither"!=a&&a==n){var i=o(t,r);$(t.root+" .slider_"+r).slider("value",0),d3.select(t.root+" .title_"+r).text(i.text+i.state+i.suffix),d3.select(t.root+" .slider_"+r).attr("current_state",i.state)}});var i=o(t,e);d3.select(t.root+" .title_"+e).text(i.text+r+i.suffix)}},function(t,e,r){"use strict";var o=r(84),a=r(83);t.exports=function(t,e,r){var n=d3.select(e.root+" .sidebar_wrapper").append("div").classed("div_filters",!0);"numerical"==e.viz.possible_filters[r]?o(t,e,r,n):"categorical"==e.viz.possible_filters[r]&&a(t,e,r,n)}},function(t,e,r){"use strict";var o=r(1);t.exports=function(t){var e,r,a=[];return r=!!o.has(t.links[0],"value_orig"),t.row_nodes.forEach(function(n,i){a[i]={},a[i].name=t.row_nodes[i].name,a[i].row_data=d3.range(t.col_nodes.length).map(function(a){return e=o.has(t.links[0],"value_up")||o.has(t.links[0],"value_dn")?{pos_x:a,pos_y:i,value:0,value_up:0,value_dn:0,highlight:0}:{pos_x:a,pos_y:i,value:0,highlight:0},r&&(e.value_orig=0),e})}),t.links.forEach(function(t){a[t.source].row_data[t.target].value=t.value,a[t.source].row_data[t.target].row_name=t.row_name,a[t.source].row_data[t.target].col_name=t.col_name,(o.has(t,"value_up")||o.has(t,"value_dn"))&&(a[t.source].row_data[t.target].value_up=t.value_up,a[t.source].row_data[t.target].value_dn=t.value_dn),r&&(a[t.source].row_data[t.target].value_orig=t.value_orig),t.highlight&&(a[t.source].row_data[t.target].highlight=t.highlight),t.info&&(a[t.source].row_data[t.target].info=t.info)}),a}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_col){t.click_hlight_col=r;var o=6,a=.85,n=o*t.viz.border_width;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_top_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",n).attr("fill",t.matrix.hlight_color).attr("opacity",a).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_bottom_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",n).attr("fill",t.matrix.hlight_color).attr("opacity",a).attr("transform",function(){var e=t.viz.x_scale.rangeBand()-n,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_col=-666}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_row){var o=6,a=.85,n=o*t.viz.border_width/t.viz.zoom_switch;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_top_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",n).attr("fill",t.matrix.hlight_color).attr("opacity",a),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_bottom_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",n).attr("fill",t.matrix.hlight_color).attr("opacity",a).attr("transform",function(){var e=t.viz.y_scale.rangeBand()-n;return"translate(0,"+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_row=-666}},function(t,e,r){"use strict";var o=r(3);t.exports=function(t){if(t.labels.show_label_tooltips){var e=o().attr("class","d3-tip").direction("w").offset([20,0]).style("display","block").html(function(t){var e=t.name.replace(/_/g," ").split("#")[0];return"<span>"+e+"</span>"});d3.select(t.viz.viz_wrapper).select("svg").select(t.root+" .col_zoom_container").selectAll(".col_label_group").select("text").call(e),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_group").on("mouseover",e.show).on("mouseout",function(){e.hide(this)})}}},function(t,e,r){"use strict";var o=r(3);t.exports=function(t){if(t.labels.show_label_tooltips){var e=o().attr("class","d3-tip").direction("e").offset([0,10]).html(function(t){var e=t.name.replace(/_/g," ").split("#")[0];return"<span>"+e+"</span>"});d3.select(t.viz.viz_wrapper).select(t.root+" .row_container").call(e),d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(t){d3.selectAll(".d3-tip").style("opacity",0),d3.select(this).select("text").classed("active",!0),e.show(t)}).on("mouseout",function(t){d3.select(this).select("text").classed("active",!1),e.hide(t)})}else d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)})}},function(t,e){"use strict";t.exports=function(t){d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("height",t.viz.super_labels.dim.width+"px").attr("width","3000px").classed("super_col_bkg",!0).classed("white_bars",!0).attr("transform","translate(0,"+t.viz.super_labels.margin.top+")"),d3.select(t.viz.viz_svg).append("text").attr("class","super_col").text(t.labels["super"].col).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row-e/2,o=t.viz.super_labels.dim.width;return"translate("+r+","+o+")"}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300),d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("width",t.viz.super_labels.dim.width+"px").attr("height","3000px").classed("super_row_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.super_labels.margin.left+",0)"),d3.select(t.viz.viz_svg).append("g").classed("super_row",!0).attr("transform",function(){var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"}),d3.select(t.root+" .super_row").append("text").text(t.labels["super"].row).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=e/2+t.viz.norm_labels.width.col,o="translate(0,"+r+"), rotate(-90)";return o}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300)}},function(t,e){"use strict";t.exports=function(t,e){d3.select(e).each(function(r){var o=r.pos_x,a=r.pos_y;if(d3.selectAll(t.root+" .click_hlight").remove(),o!=t.matrix.click_hlight_x||a!=t.matrix.click_hlight_y){t.matrix.click_hlight_x=o,t.matrix.click_hlight_y=a;var n=6,i=.85,l=n*t.viz.border_width,s=n*t.viz.border_width/t.viz.zoom_switch;d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("top_hlight",!0).attr("width",t.viz.x_scale.rangeBand()).attr("height",s).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(o)+",0)"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("left_hlight",!0).attr("width",l).attr("height",t.viz.y_scale.rangeBand()-.99*s).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(o)+","+.99*s+")"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("right_hlight",!0).attr("width",l).attr("height",t.viz.y_scale.rangeBand()-.99*s).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(o)+t.viz.x_scale.rangeBand()-l;return"translate("+e+","+.99*s+")"}).attr("opacity",i),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("bottom_hlight",!0).attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*l}).attr("height",s).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(o)+.99*l,r=t.viz.y_scale.rangeBand()-s;return"translate("+e+","+r+")"}).attr("opacity",i)}else t.matrix.click_hlight_x=-666,t.matrix.click_hlight_y=-666})}},function(t,e,r){"use strict";var o=r(1),a=r(71),n=r(93),i=r(95),l=r(3);t.exports=function(t,e){var r,s=t.network_data,c=[],d=s.row_nodes,u=s.col_nodes,v=_.pluck(d,"name");r=e.append("g").attr("class","clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")").append("g").attr("class","clust_group").classed("clust_group",!0);var h=l().attr("class","d3-tip tile_tip").direction("nw").offset([0,0]).html(function(e){var r,o=String(e.value.toFixed(3));if(t.keep_orig){var a=String(e.value_orig.toFixed(3));r="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+o+"</p><div> original value: "+a+"</div>"}else r="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+o+"</div>";return r});return d3.select(t.root+" .clust_group").call(h),r.append("rect").classed("background",!0).classed("grey_background",!0).style("fill","#eee").style("opacity",.25).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),r.selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).enter().append("g").attr("class","row").attr("transform",function(e){var r=_.indexOf(v,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).each(function(e){i(t,e,h,this)}),"function"==typeof t.click_tile?d3.selectAll(t.root+" .tile").on("click",function(e){var r={};r.row=t.network_data.row_nodes[e.pos_y].name,r.col=t.network_data.col_nodes[e.pos_x].name,r.value=e.value,o.has(e,"value_up")&&(r.value_up=e.value_up),o.has(e,"value_dn")&&(r.value_dn=e.value_dn),o.has(e,"info")&&(r.info=e.info),t.click_tile(r),n(t,this)}):t.tile_click_hlight&&d3.selectAll(t.root+" .tile").on("click",function(){n(t,this)}),a(t,d,u),{get_clust_group:function(){return r},get_matrix:function(){return c},get_nodes:function(t){return"row"===t?s.row_nodes:s.col_nodes}}}},function(t,e,r){"use strict";var o=r(10),a=r(9),n=r(5),i=r(4);t.exports=function(t,e,r,l){var s=e.row_data,c=_.filter(s,function(t){return 0!==t.value}),d=d3.select(l).selectAll("rect").data(c,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).on("mouseover",function(){for(var e=arguments.length,o=Array(e),a=0;e>a;a++)o[a]=arguments[a];n(t,this,r,o)}).on("mouseout",function(){i(t,this,r)}).style("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"});if("updn"==t.matrix.tile_type){var u=_.filter(s,function(t){return 0!=t.value_up||0!=t.value_dn});d3.select(l).selectAll(".tile_up").data(u,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return o(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}).style("fill",function(){return t.matrix.tile_colors[0]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r}).on("mouseover",function(){for(var e=arguments.length,o=Array(e),a=0;e>a;a++)o[a]=arguments[a];n(t,this,r,o)}).on("mouseout",function(){i(t,this,r)}),d3.select(l).selectAll(".tile_dn").data(u,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return a(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}).style("fill",function(){return t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}).on("mouseover",function(){for(var e=arguments.length,o=Array(e),a=0;e>a;a++)o[a]=arguments[a];n(t,this,r,o)}).on("mouseout",function(){i(t,this,r)}),d.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}t.matrix.tile_title&&d.append("title").text(function(t){var e="value: "+t.value;return e})}},function(t,e){"use strict";t.exports=function(t,e){t.current_col_cat=e}},function(t,e){"use strict";t.exports=function(t,e){function r(){d3.select(e.viz.viz_svg).transition().duration(250).style("opacity",1)}var o=t.network_data.row_nodes,a=t.network_data.col_nodes,n=_.map(o,function(t){return t.name}),i=_.map(a,function(t){return t.name}),l=n.concat(i),s=e.network_data.row_nodes,c=e.network_data.col_nodes,d=_.map(s,function(t){return t.name}),u=_.map(c,function(t){return t.name}),v=d.concat(u),h=_.difference(l,v).length,m=_.difference(v,l).length,f={};h>0?f.update=1e3:f.update=0,m>0?f.enter=1e3:f.enter=0,f.enter=f.enter+f.update,f.run_transition=!0;var p=t.network_data.links.length,g=e.network_data.links.length,w=.5*e.matrix.def_large_matrix;return(p>w||g>w)&&(f.run_transition=!1,f.update=0,f.enter=0),d3.select(e.viz.viz_svg).style("opacity",.7),setTimeout(r,f.enter),f}},function(t,e){"use strict";t.exports=function(t,e,r,o){var a=_.pluck(e.row_nodes,"name"),n=_.pluck(e.col_nodes,"name"),i=_.filter(r,function(t){var e=t.name.split("_")[0],r=t.name.split("_")[1],o=_.indexOf(a,e),i=_.indexOf(n,r);return o>-1&i>-1?(t.source=o,t.target=i,t):void 0}),l={};return l.row_nodes=e.row_nodes,l.row_nodes_names=a,l.col_nodes=e.col_nodes,l.col_nodes_names=n,l.links=i,l.all_links=r,l.views=o,l}},function(t,e,r){"use strict";var o=r(1);t.exports=function(t){var e,r,a={};for(a.row_nodes=t.col_nodes,a.col_nodes=t.row_nodes,a.links=[],r=0;r<t.links.length;r++)e={},e.source=t.links[r].target,e.target=t.links[r].source,e.value=t.links[r].value,o.has(t.links[r],"highlight")&&(e.highlight=t.links[r].highlight),o.has(t.links[r],"value_up")&&(e.value_up=t.links[r].value_up),o.has(t.links[r],"value_dn")&&(e.value_dn=t.links[r].value_dn),o.has(t.links[r],"info")&&(e.info=t.links[r].info),a.links.push(e);return a}},function(t,e){"use strict";t.exports=function(t){return t.norm_labels.margin={},t.norm_labels.margin.left=t.super_labels.margin.left+t.super_labels.dim.width,t.norm_labels.margin.top=t.super_labels.margin.top+t.super_labels.dim.width,t.label_background={},t.label_background.row=t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.label_background.col=t.norm_labels.width.col+t.cat_room.col+t.uni_margin,t}},function(t,e){"use strict";t.exports=function(t,e){return e.viz.x_scale=d3.scale.ordinal().rangeBands([0,e.viz.clust.dim.width]),e.viz.y_scale=d3.scale.ordinal().rangeBands([0,e.viz.clust.dim.height]),e.viz.x_scale.domain(e.matrix.orders[e.viz.inst_order.row+"_row"]),e.viz.y_scale.domain(e.matrix.orders[e.viz.inst_order.col+"_col"]),e.viz.border_width=e.viz.x_scale.rangeBand()/e.viz.border_fraction,e}},function(t,e){"use strict";t.exports=function(t,e){var r={};return r.super_label_scale=t.super_label_scale,r.super_labels=t.super_labels,r.super_label_fs=13.8,r.super_labels&&(r["super"]={},r["super"].row=t["super"].row,r["super"].col=t["super"].col),r.show_label_tooltips=t.show_label_tooltips,r.row_max_char=_.max(e.row_nodes,function(t){return t.name.length}).name.length,r.col_max_char=_.max(e.col_nodes,function(t){return t.name.length}).name.length,r.max_allow_fs=20,r}},function(t,e,r){"use strict";var o=r(1),a=r(87);t.exports=function(t,e,r){var n={};n.tile_colors=t.tile_colors,n.bar_colors=t.bar_colors,n.outline_colors=t.outline_colors,n.hlight_color=t.highlight_color,n.tile_title=t.tile_title,n.show_tile_tooltips=t.show_tile_tooltips,n.make_tile_tooltip=t.make_tile_tooltip,n.click_hlight_x=-666,n.click_hlight_y=-666,n.click_hlight_row=-666,n.click_hlight_col=-666,n.def_large_matrix=1e4,n.opacity_function=t.opacity_scale,n.orders={},_.each(["row","col"],function(t){var o;o="row"===t?"col":"row";var a=r[o+"_nodes"],i=a.length,l=_.pluck(a,"name"),s=l.sort(),c=_.map(s,function(t){return r[o+"_nodes_names"].indexOf(t)});n.orders["alpha_"+t]=c;var d=["clust","rank"];_.has(a[0],"rankvar")&&d.push("rankvar"),e.all_cats[o].length>0&&_.each(e.all_cats[o],function(t){t=t.replace("-","_"),d.push(t+"_index")}),_.each(d,function(e){var r=d3.range(i).sort(function(t,r){return a[r][e]-a[t][e]});n.orders[e+"_"+t]=r})}),o.has(r,"all_links")?n.max_link=_.max(r.all_links,function(t){return Math.abs(t.value)}).value:n.max_link=_.max(r.links,function(t){return Math.abs(t.value)}).value,0===t.input_domain?"linear"===n.opacity_function?n.opacity_scale=d3.scale.linear().domain([0,Math.abs(n.max_link)]).clamp(!0).range([0,1]):"log"===n.opacity_function&&(n.opacity_scale=d3.scale.log().domain([.001,Math.abs(n.max_link)]).clamp(!0).range([0,1])):"linear"===n.opacity_function?n.opacity_scale=d3.scale.linear().domain([0,t.input_domain]).clamp(!0).range([0,1]):"log"===n.opacity_function&&(n.opacity_scale=d3.scale.log().domain([.001,t.input_domain]).clamp(!0).range([0,1]));var i=o.has(r.links[0],"value_up"),l=o.has(r.links[0],"value_dn");return i||l?n.tile_type="updn":n.tile_type="simple",o.has(r.links[0],"highlight")?n.highlight=1:n.highlight=0,n.matrix=a(r),n.wait_tooltip=0,n}},function(t,e){"use strict";t.exports=function(t){var e={};return e.wrapper={},e.wrapper.width=170,e.row_search={},e.row_search.box={},e.row_search.box.height=34,e.row_search.box.width=95,e.row_search.placeholder=t.row_search_placeholder,e.slider={},e.slider.width=t.sidebar_width-30,e.slider.margin_left=15,e.key_cat={},e.key_cat.width=t.sidebar_width-15,e.key_cat.margin_left=5,e.key_cat.max_height=100,e.title=t.title,e.about=t.about,e.width=t.sidebar_width,e.buttons={},e.buttons.width=t.sidebar_width-15,e.text={},e.text.width=t.sidebar_width-15,e.icons=t.sidebar_icons,e}},function(t,e,r){"use strict";var o=r(1),a=r(18);t.exports=function(t,e){var r={};r.root=t.root,r.viz_wrapper=t.root+" .viz_wrapper",r.do_zoom=t.do_zoom,r.background_color=t.background_color,r.super_border_color=t.super_border_color,r.outer_margins=t.outer_margins,r.expand=t.ini_expand,r.grey_border_width=t.grey_border_width,r.show_dendrogram=t.show_dendrogram,r.tile_click_hlight=t.tile_click_hlight,r.inst_order=t.inst_order,r.expand_button=t.expand_button,r.all_cats=t.all_cats,r.cat_colors=t.cat_colors,r.cat_names=t.cat_names,r.sim_mat=t.sim_mat,r.viz_svg=r.viz_wrapper+" .viz_svg",r.zoom_element=r.viz_wrapper+" .viz_svg",r.uni_duration=1e3,r.bottom_space=5,r.run_trans=!1,r.duration=1e3,r.show_dendrogram&&(t.group_level={}),o.has(t,"size")?(r.resize=!1,r.fixed_size=t.size):(r.resize=!0,r.fixed_size=!1),r.border_fraction=55,r.uni_margin=5,r.super_labels={},r.super_labels.margin={},r.super_labels.dim={},r.super_labels.margin.left=r.grey_border_width,r.super_labels.margin.top=r.grey_border_width,
r.super_labels.dim.width=0,e.labels.super_labels&&(r.super_labels.dim.width=15*e.labels.super_label_scale),r.show_categories={},r.cat_room={},r.cat_room.symbol_width=12,r.cat_room.separation=3,r.cat_colors.opacity=.6,r.cat_colors.active_opacity=.9,r.triangle_opacity=.6,r.norm_labels={},r.norm_labels.width={},r.dendro_room={},r.show_dendrogram?r.dendro_room.symbol_width=10:r.dendro_room.symbol_width=0;var n,i=d3.scale.linear().domain([5,15]).range([85,120]).clamp("true");_.each(["row","col"],function(o){r.show_categories[o]=t.show_categories[o],r.norm_labels.width[o]=i(e.labels[o+"_max_char"])*e[o+"_label_scale"],r["num_"+o+"_nodes"]=e.network_data[o+"_nodes"].length,_.has(t,"group_level")&&(t.group_level[o]=5),"row"===o?r.dendro_room[o]=r.dendro_room.symbol_width:r.dendro_room[o]=r.dendro_room.symbol_width+r.uni_margin;var a=r.all_cats[o].length;if(r.show_categories[o]){n=(a-1)*r.cat_room.separation;var l;l="row"===o?a+1:a,r.cat_room[o]=l*r.cat_room.symbol_width+n}else"row"==o?r.cat_room[o]=r.cat_room.symbol_width:r.cat_room[o]=0}),r.dendro_opacity=.35,r.spillover_col_slant=r.norm_labels.width.col;var l=a(e.network_data.views);return r.possible_filters=l.possible_filters,r.filter_data=l.filter_data,r}},function(t,e,r){"use strict";var o=r(62),a=r(21);t.exports=function(t){t.viz.zoom_scale_font={},t.viz.zoom_scale_font.row=1,t.viz.zoom_scale_font.col=1;var e=.75,r=t.viz.x_scale.rangeBand()/2;return t.viz.real_zoom=t.viz.norm_labels.width.col/r*e,t.viz=a(t.viz),t.zoom_behavior=d3.behavior.zoom().scaleExtent([1,t.viz.real_zoom*t.viz.zoom_switch]).on("zoom",function(){o(t)}),t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width/t.viz.zoom_switch,t}},function(t,e,r){"use strict";var o=r(19),a=r(15),n=r(16),i=r(17),l=r(21);t.exports=function(t){return t=o(t),t.viz=n(t.viz),t.viz=a(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=l(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.rect_width=t.viz.x_scale.rangeBand(),t.viz.rect_height=t.viz.y_scale.rangeBand(),t.viz.real_zoom=t.viz.norm_labels.width.col/(t.viz.rect_width/2),t.viz.border_width=t.viz.rect_width/55,t=i(t)}},function(t,e,r){"use strict";var o=r(1),a=r(15),n=r(19),i=r(16),l=r(61),s=r(52),c=r(57),d=r(56),u=r(54),v=r(55),h=r(49),m=r(50),f=r(51),p=r(48),g=r(53),w=r(17),z=r(21),x=r(2);t.exports=function(t,e,r,b,y,k){var A={};A.zoom_x=1,A.zoom_y=1,A.trans_x=0,A.trans_y=0,x(t,A);var B=t.network_data.row_nodes_names;l(t),t=n(t),t.viz=i(t.viz),t.viz=a(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=z(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.real_zoom=t.viz.norm_labels.width.col/(t.viz.x_scale.rangeBand()/2),t.zoom_behavior.scaleExtent([1,t.viz.real_zoom*t.viz.zoom_switch]),t.viz.border_width=t.viz.x_scale.rangeBand()/40,t=w(t);var O=d3.select(t.viz.viz_wrapper).select("svg");O.select(t.root+" .grey_background").transition().delay(k.update).duration(y).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),u(t,O,k),O.selectAll(".row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").text(function(t){return o.normal_name(t)}),O.selectAll(".row_label_group").each(function(){var e=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",e.x).attr("y",0).attr("width",e.width).attr("height",t.viz.y_scale.rangeBand()).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),v(t,O,k),k.run_transition?(O.selectAll(".row_label_group").select("text").transition().delay(k.update).duration(y).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),O.selectAll(".row_cat_group").data(e,function(t){return t.name}).transition().delay(k.update).duration(y).attr("transform",function(e){var r=_.indexOf(B,e.name);return"translate(0, "+t.viz.y_scale(r)+")"}),O.selectAll(".row_cat_group").select("path").transition().delay(k.update).duration(y).attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,o=1,a=t.viz.y_scale.rangeBand()/2,n=t.viz.cat_room.symbol_width-1,i=t.viz.y_scale.rangeBand(),l="M "+e+","+r+" L "+o+","+a+", L "+n+","+i+" Z";return l}),O.selectAll(".row_dendro_group").data(e,function(t){return t.name}).transition().delay(k.update).duration(y).attr("transform",function(e){var r=_.indexOf(B,e.name);return"translate(0, "+t.viz.y_scale(r)+")"})):(O.selectAll(".row_label_group").select("text").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),O.selectAll(".row_cat_group").data(e,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(B,e.name);return"translate(0, "+t.viz.y_scale(r)+")"}),O.selectAll(".row_cat_group").select("path").attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,o=1,a=t.viz.y_scale.rangeBand()/2,n=t.viz.cat_room.symbol_width-1,i=t.viz.y_scale.rangeBand(),l="M "+e+","+r+" L "+o+","+a+", L "+n+","+i+" Z";return l}),O.selectAll(".row_dendro_group").data(e,function(t){return t.name}).attr("transform",function(e){var r=_.indexOf(B,e.name);return"translate(0, "+t.viz.y_scale(r)+")"})),o.has(t.network_data.row_nodes[0],"value")&&g(t,O),h(t,O,k),m(t,O),f(t,O,k),p(t,O,k),s(t,O,k),c(t,O,k),d(t.viz,O,k),t.zoom_behavior.scale(1).translate([t.viz.clust.margin.left,t.viz.clust.margin.top])}},function(t,e,r){"use strict";var o=r(115),a=r(43);t.exports=function(t){var e=a(t);o(t,e)}},function(t,e){"use strict";t.exports=function(t,e){e.select(".left_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),e.select(".right_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",function(){var e=t.viz.svg_dim.width-t.viz.grey_border_width;return"translate("+e+",0)"}),e.select(".top_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),e.select(".bottom_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var e=t.viz.svg_dim.height-t.viz.grey_border_width;return"translate(0,"+e+")"})}},function(t,e){"use strict";t.exports=function(t){d3.select(t.root+" .clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),d3.select(t.root+" .col_cat_outer_container").attr("transform",function(){var e=t.viz.norm_labels.width.col+2;return"translate(0,"+e+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r=t.network_data.col_nodes_names,o=t.network_data.row_nodes_names;e.selectAll(".horz_lines").attr("transform",function(e){var r=_.indexOf(o,e.name);return"translate(0,"+t.viz.y_scale(r)+") rotate(0)"}),e.selectAll(".horz_lines").select("line").attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){var e;return e=t.viz.zoom_switch>1?t.viz.border_width/t.viz.zoom_switch:t.viz.border_width,e+"px"}),e.selectAll(".vert_lines").attr("transform",function(e){var o=_.indexOf(r,e.name);return"translate("+t.viz.x_scale(o)+") rotate(-90)"}),e.selectAll(".vert_lines").select("line").attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){var e;return e=t.viz.zoom_switch_y>1?t.viz.border_width/t.viz.zoom_switch_y:t.viz.border_width,e+"px"})}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width,o=e*t.viz.border_width/t.viz.zoom_switch;d3.select(t.root+" .top_hlight").attr("width",t.viz.rect_width).attr("height",o).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.rect_width-.99*o).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*o+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.rect_height-.99*o).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.rect_width-r;return"translate("+e+","+.99*o+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.rect_width-1.98*r}).attr("height",o).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,a=t.viz.rect_height-o;return"translate("+e+","+a+")"}),d3.select(t.root+" .row_top_hlight").attr("width",t.viz.svg_dim.width).attr("height",o),d3.select(t.root+" .row_bottom_hlight").attr("width",t.viz.svg_dim.width).attr("height",o).attr("transform",function(){var e=t.viz.rect_height-o;return"translate(0,"+e+")"}),d3.select(t.root+" .col_top_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(t.root+" .col_bottom_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=t.viz.rect_width-r,o=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+o+","+e+")"})}},function(t,e,r){"use strict";var o=r(10),a=r(9);t.exports=function(t,e){var r=t.network_data.row_nodes,n=_.pluck(r,"name");e.selectAll(".row").attr("transform",function(e){var r=_.indexOf(n,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}),e.selectAll(".row").selectAll(".tile").attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height),e.selectAll(".row").selectAll(".tile_up").attr("d",function(){return o(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}),e.selectAll(".row").selectAll(".tile_dn").attr("d",function(){return a(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"})}},function(t,e,r){"use strict";var o=r(1),a=r(62),n=r(23),i=r(61),l=r(52),s=r(112),c=r(57),d=r(56),u=r(110),v=r(54),h=r(113),m=r(55),f=r(49),p=r(50),g=r(51),w=r(48),z=r(107),x=r(114),b=r(53),y=r(14),k=r(7),A=r(6),B=r(8),O=r(2);t.exports=function(t,e){var r={};r.zoom_x=1,r.zoom_y=1,r.trans_x=0,r.trans_y=0,O(t,r),d3.select(t.root+" .sidebar_wrapper").style("height",e.height+"px"),d3.select(t.viz.viz_wrapper).style("float","left").style("margin-top",e.top+"px").style("width",e.width+"px").style("height",e.height+"px"),t=z(t),i(t);var M=d3.select(t.viz.viz_svg);_.each(t.network_data.links,function(e){e.x=t.viz.x_scale(e.target),e.y=t.viz.y_scale(e.source)}),M.on(".zoom",null),t.zoom_behavior.scaleExtent([1,t.viz.real_zoom*t.viz.zoom_switch]).on("zoom",function(){a(t)}),t.viz.do_zoom&&M.call(t.zoom_behavior),n(t),M.attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height),M.select(".super_background").style("width",t.viz.svg_dim.width).style("height",t.viz.svg_dim.height),M.select(".grey_background").attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height);var E=t.network_data.row_nodes,T=_.pluck(E,"name");x(t,M),M.selectAll(".highlighting_rect").attr("width",.8*t.viz.x_scale.rangeBand()).attr("height",.8*t.viz.y_scale.rangeBand()),h(t),v(t,M),m(t,M),M.selectAll(".row_label_group").each(function(){var e=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",e.x).attr("y",0).attr("width",e.width).attr("height",t.viz.rect_height).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),M.selectAll(".row_label_group").select("text").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),o.has(t.network_data.row_nodes[0],"value")&&b(t,M),M.selectAll(".row_cat_group").attr("transform",function(e){var r=_.indexOf(T,e.name);return"translate(0, "+t.viz.y_scale(r)+")"}),M.selectAll(".row_cat_group").select("path").attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,o=1,a=t.viz.rect_height/2,n=t.viz.cat_room.symbol_width-1,i=t.viz.rect_height,l="M "+e+","+r+" L "+o+","+a+", L "+n+","+i+" Z";return l});var L=!0;t.viz.show_dendrogram&&(k(t,L),A(t,L),l(t,M),B(t,"row",0),B(t,"col",0)),f(t,M),p(t,M),g(t,M),w(t,M),c(t,M),d(t.viz,M),s(t,M),u(t,M),t.zoom_behavior.scale(1).translate([t.viz.clust.margin.left,t.viz.clust.margin.top]),y(t),d3.select(t.viz.viz_svg).style("opacity",1)}},function(t,e,r){"use strict";var o=r(43);t.exports=function(t){d3.select(t.root+" .viz_wrapper").empty()&&(d3.select(t.root).append("div").classed("sidebar_wrapper",!0),d3.select(t.root).append("div").classed("viz_wrapper",!0));var e=o(t),r=5;d3.select(t.root).style("clear","both"),d3.select(t.root+" .sidebar_wrapper").style("margin-left",r+"px").style("float","left").style("width",t.sidebar_width+"px").style("height",e.height+"px").style("overflow","hidden"),d3.select(t.viz.viz_wrapper).style("float","left").style("width",e.width+"px").style("height",e.height+"px")}},function(t,e){"use strict";t.exports=function(t){$(t.root+" .slider").slider("disable"),d3.selectAll(t.root+" .btn").attr("disabled",!0),d3.select(t.viz.viz_svg).style("opacity",.7)}},function(t,e){"use strict";t.exports=function(t){$(t.root+" .slider").slider("enable"),d3.selectAll(t.root+" .btn").attr("disabled",null),t.viz.run_trans=!1}},function(t,e,r){"use strict";var o=r(59),a=r(86),n=r(123),i=r(125),l=r(124),s=r(120),c=r(122),d=r(121);t.exports=function u(t,e){var u=d3.select(e.root+" .sidebar_wrapper");u.append("div").classed("title_section",!0),null!=e.sidebar.title&&u.select(".title_section").append("h4").style("margin-left","3px").style("margin-top","5px").style("margin-bottom","0px").text(e.sidebar.title),u.append("div").classed("about_section",!0),null!=e.sidebar.about&&u.select(".about_section").append("h5").classed("sidebar_text",!0).style("font-size","15px").style("font-weight",400).style("margin-left","4px").style("margin-top","5px").style("margin-bottom","2px").style("width",e.sidebar.text.width+"px").style("text-align","justify").text(e.sidebar.about),u.append("div").classed("icons_section",!0),e.sidebar.icons&&d(e,u),l(e,u),i(u,e),e.viz.show_dendrogram&&n(u,e);var r=_.keys(e.viz.possible_filters);return r.indexOf("enr_score_type")>-1&&r.sort(function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}),_.each(r,function(r){a(t,e,r)}),o(e),s(e),null!==e.ini_view&&(c(e),e.ini_view=null),e}},function(t,e){"use strict";t.exports=function(t){var e,r;r=t.sim_mat?["both"]:["row","col"],_.each(r,function(r){if(t.show_categories[r]){var o=t.viz.all_cats[r].length;_.each(d3.range(o).reverse(),function(o){var a=t.viz.all_cats[r][o],n=d3.select(t.root+" .sidebar_wrapper").append("div").classed("key_cat_"+r,!0).style("margin-top","10px").style("padding","5px").style("border","1px solid #DEDEDE").style("margin-bottom","10px").style("overflow","scroll").style("max-height",t.sidebar.key_cat.max_height+"px").style("width",t.sidebar.key_cat.width+"px").style("margin-left",t.sidebar.key_cat.margin_left+"px"),i=parseInt(a.split("-")[1],10)+1;e="row"===r?"Row":"Column",n.append("p").text(e+" Category "+String(i)).style("margin-bottom","2px");var l=_.keys(t.viz.cat_colors[r][a]);l=l.sort(),_.each(l,function(e){var o=n.append("g").attr("class","category_section");o.append("div").attr("class","category_color").style("width","15px").style("height","15px").style("float","left").style("margin-right","5px").style("margin-top","2px").style("background-color",function(){var o=t.viz.cat_colors[r][a][e];return o}).style("opacity",t.viz.cat_colors.opacity),o.append("p").style("margin-bottom","2px").append("text").text(e).attr("class","noselect").style("cursor","pointer")})})}})}},function(t,e){"use strict";t.exports=function(t,e){function r(){d3.select(".expand_button").style("opacity",0);var t=d3.select("svg").attr("title","test2").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,e=new Blob([t],{type:"image/svg+xml"});saveAs(e,"clustergrammer.svg"),d3.select(".expand_button").style("opacity",.4)}var o=e.select(".icons_section").style("margin-top","7px").style("margin-left","-10px").style("width",t.sidebar.buttons.width+"px").append("row");o.append("col").classed("col-xs-4",!0).append("a").attr("href","http://amp.pharm.mssm.edu/clustergrammer/help").attr("target","_blank").append("i").classed("fa",!0).classed("fa-question-circle",!0).classed("icon_buttons",!0).style("font-size","25px"),o.append("col").classed("col-xs-4",!0).append("i").classed("fa",!0).classed("fa-share-alt",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(".share_info").modal("toggle"),$(".share_url").val(window.location.href)}),o.append("col").classed("col-xs-4",!0).append("i").classed("fa",!0).classed("fa-camera",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(".picture_info").modal("toggle")}),d3.select(".download_buttons").append("p").append("a").html("Download SVG").on("click",function(){r()});var a="svg_"+t.root.replace("#","");d3.select(".download_buttons").append("p").append("a").html("Download PNG").on("click",function(){d3.select(".expand_button").style("opacity",0),saveSvgAsPng(document.getElementById(a),"clustergrammer.png"),d3.select(".expand_button").style("opacity",.4)})}},function(t,e,r){"use strict";var o=r(12);t.exports=function(t){_.each(_.keys(t.ini_view),function(e){var r=t.ini_view[e],a=t.viz.possible_filters[e];if("numerical"===a){var n=t.viz.filter_data[e];"all"!=r&&(r=parseInt(r,10)),t.viz.filter_data[e].indexOf(r)<=-1&&(r="all");var i=n.indexOf(r);$(t.root+" .slider_"+e).slider("value",i);var l=o(t,e);d3.select(t.root+" .title_"+e).text(l.text+r+l.suffix),d3.select(t.root+" .slider_"+e).attr("current_state",r)}})}},function(t,e){"use strict";t.exports=function(t,e){var r,o=t.append("div").classed("dendro_sliders",!0);r=e.sim_mat?["both"]:["row","col"];var a={};a.row="Row Group Size",a.col="Column Group Size",a.both="Group Size",_.each(r,function(t){o.append("p").classed("viz_medium_text",!0).text(a[t]),o.append("div").classed("slider_"+t,!0).classed("slider",!0).style("width",e.sidebar.slider.width+"px").style("margin-left",e.sidebar.slider.margin_left+"px")})}},function(t,e){"use strict";t.exports=function(t,e){var r,o,a,n,i,l={row:"Row",col:"Column",both:""};i=t.sim_mat?["both"]:["row","col"],_.each(i,function(i){r={clust:"Cluster",rank:"Rank by Sum",rankvar:"Rank by Variance",ini:"Initial Order",alpha:"Alphabetically"};var s;s="row"===i?"col":"row",o=Object.keys(t.matrix.orders);var c=[];_.each(o,function(t){t.indexOf(s)>-1&&(t=t.replace("_row","").replace("_col",""),t.indexOf("cat_")<0&&c.push(t))}),_.keys(t.viz.filter_data).indexOf("enr_score_type")>-1&&(c=["clust","rank"]),c=_.uniq(c),c=c.sort();var d;d="both"!=i?" Order":"Reorder Matrix",e.append("div").classed("sidebar_text",!0).style("clear","both").style("margin-left","5px").style("font-size","14px").html(l[i]+d),n=e.append("div").classed("viz_medium_text",!0).append("div").classed("btn-group-vertical",!0).classed("toggle_"+i+"_order",!0).attr("role","group").style("max-width",t.sidebar.buttons.width+"px"),n.selectAll(".button").data(c).enter().append("button").attr("type","button").style("font-size","14px").classed("btn",!0).classed("btn-primary",!0).classed("sidebar_text",!0).classed("active",function(e){return a=!1,e==t.viz.inst_order[s]&&(a=!0),a}).attr("name",function(t){return t}).html(function(t){return r[t]})})}},function(t,e){"use strict";t.exports=function(t,e){var r=t.append("div").classed("gene_search_container",!0).style("margin-top","10px").style("margin-left","0px").style("width","185px");r.append("input").classed("form-control",!0).classed("gene_search_box",!0).attr("type","text").classed("sidebar_text",!0).attr("placeholder",e.sidebar.row_search.placeholder).style("width","70px").style("height",e.sidebar.row_search.box.height+"px").style("float","left"),r.append("div").classed("btn-group",!0).classed("gene_search_button",!0).attr("data-toggle","buttons").append("div").append("button").classed("sidebar_text",!0).html("Search").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("submit_gene_button",!0).style("margin-left","4px").style("float","left").style("padding-top","6px").style("padding-bottom","6px")}},function(t,e,r){"use strict";var o=r(26),a=r(20);t.exports=function(t){var e=t.viz;d3.select(e.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 1000,-1000, L 1000,0 Z").attr("fill",e.background_color).attr("class","right_slant_triangle").attr("transform","translate("+e.clust.dim.width+","+e.norm_labels.width.col+")"),d3.select(e.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 500,-500, L 0,-500 Z").attr("fill",e.background_color).attr("class","left_slant_triangle").attr("transform","translate(-1,"+e.norm_labels.width.col+")"),d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",e.clust.margin.left).attr("height",e.clust.margin.top).attr("class","top_left_white");var r=e.clust.margin.left+e.clust.dim.width+e.uni_margin+e.dendro_room.row,n=e.norm_labels.margin.top+e.norm_labels.width.col;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",10*e.clust.dim.width).attr("height",e.svg_dim.height+"px").attr("transform",function(){return"translate("+r+","+n+")"}).attr("class","white_bars").attr("class","right_spillover");var i=e.clust.margin.left+e.clust.dim.width,l=n,s=e.dendro_room.row+e.uni_margin,c=e.cat_room.col+e.uni_margin;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",s).attr("height",c).attr("transform",function(){return"translate("+i+","+l+")"}).classed("white_bars",!0).classed("dendro_row_spillover",!0),i=0,l=e.clust.margin.top+e.clust.dim.height,s=e.clust.margin.left,c=10*e.clust.dim.height,d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",s).attr("height",c).attr("transform",function(){return"translate("+i+","+l+")"}).classed("white_bars",!0).classed("dendro_col_spillover",!0),i=e.clust.margin.left+e.clust.dim.width,l=e.clust.margin.top+e.clust.dim.height,s=e.cat_room.col+e.clust.dim.width,c=e.cat_room.row+e.uni_margin,d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",s).attr("height",c).attr("transform",function(){return"translate("+i+","+l+")"}).classed("white_bars",!0).classed("dendro_corner_spillover",!0),i=e.clust.margin.left+e.clust.dim.width+e.uni_margin,l=e.norm_labels.margin.top+e.norm_labels.width.col+2.5*e.uni_margin;var _=1.15*e.cat_room.symbol_width,d=.65,u=2.75,v=1.25;if(e.show_categories.col&&d3.select(e.viz_svg).selectAll().data(e.all_cats.col).enter().append("text").classed("col_cat_super",!0).style("font-size",_+"px").style("opacity",d).attr("transform",function(t){var r=parseInt(t.split("-")[1],10),o=l+v*e.cat_room.symbol_width*r;return"translate("+i+","+o+")"}).text(function(t){return o(e,t,"col")}).on("dblclick",function(){var r=this.__data__.replace("-","_")+"_index";e.sim_mat?(a(t,r,"row"),a(t,r,"col")):a(t,r,"col")}),e.show_categories.row){var h=d3.select(e.viz_svg).append("g").classed("row_cat_label_container",!0).attr("transform",function(){return i=e.norm_labels.margin.left+e.norm_labels.width.row+e.cat_room.symbol_width+u*e.uni_margin,l=e.clust.margin.top-e.uni_margin,"translate("+i+","+l+") rotate(-90)"});e.sim_mat===!1&&h.selectAll().data(e.all_cats.row).enter().append("text").classed("row_cat_super",!0).style("font-size",_+"px").style("opacity",d).attr("transform",function(t){var r=v*e.cat_room.symbol_width*parseInt(t.split("-")[1],10);return"translate(0,"+r+")"}).text(function(t){return o(e,t,"row")}).on("dblclick",function(){var r=this.__data__.replace("-","_")+"_index";e.sim_mat?(a(t,r,"row"),a(t,r,"col")):a(t,r,"row")})}l=e.show_dendrogram?e.clust.margin.top+e.clust.dim.height+e.dendro_room.col:e.clust.margin.top+e.clust.dim.height,d3.select(e.viz_svg).append("rect").attr("class","bottom_spillover").attr("fill",e.background_color).attr("width",e.svg_dim.width).attr("height",2*e.svg_dim.height).attr("transform",function(){var t=l;return"translate(0,"+t+")"})}},function(t,e,r){"use strict";var o=r(10),a=r(9),n=r(5),i=r(4);t.exports=function(t,e,r,l,s,c,d){var u=_.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn}),v=d3.select(r).selectAll(".tile_up").data(u,function(t){return t.col_name}),h=v.on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];n(t,this,d,r)}).on("mouseout",function(){i(t,this,d)});l.run_transition?h.transition().delay(l.update).duration(s).attr("d",function(){return o(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}):h.attr("d",function(){return o(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"});var m=d3.select(r).selectAll(".tile_dn").data(u,function(t){return t.col_name}),f=m.on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];n(t,this,d,r)}).on("mouseout",function(){i(t,this,d)});l.run_transition?f.transition().delay(l.update).duration(s).attr("d",function(){return a(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}):f.attr("d",function(){return a(t)}).attr("transform",function(e){var r=t.viz.x_scale(e.pos_x)+.5*t.viz.border_width,o=.5*t.viz.border_width/t.viz.zoom_switch;return"translate("+r+","+o+")"}),c.selectAll(".tile").each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e,r){"use strict";var o=r(44),a=r(97),n=r(74),i=r(37),l=r(31),s=r(33),c=r(34),_=r(32),d=r(59),u=r(118),v=r(23);t.exports=function(t,e,r){var h=jQuery.extend(!0,{},t);h.network_data=r,h.inst_order=e.viz.inst_order,h.ini_expand=!1,h.ini_view=null,h.current_col_cat=e.current_col_cat;var m=o(h),f=a(e,m);return n(m,r,f),s(m),m.viz.show_categories.col&&l(m),m.viz.show_dendrogram&&(c(m),_(m)),i(m),d3.select(m.viz.viz_svg).call(m.zoom_behavior),v(m),d(m),m.viz.run_trans=!0,d3.selectAll(m.root+" .d3-tip").style("opacity",0),setTimeout(u,2500,m),m}},function(t,e,r){"use strict";var o=r(94),a=r(39),n=r(38),i=r(92),l=r(126),s=r(58),c=r(25),d=r(37),u=r(23),v=r(31),h=r(33),m=r(24),f=r(34),p=r(32);t.exports=function(t){function e(){var e=t.viz.super_border_color;return t.viz.expand&&(e="white"),e}function r(e){c(t,0,0,e)}d3.select(t.viz.viz_wrapper+" svg").remove();var g=d3.select(t.viz.viz_wrapper).append("svg").attr("class","viz_svg").attr("id","svg_"+t.root.replace("#","")).attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("is_zoom",0).attr("stopped_zoom",1);g.append("rect").attr("class","super_background").style("width",t.viz.svg_dim.width).style("height",t.viz.svg_dim.height).style("fill","white");var w=o(t,g),z=0;a(t,z),t.viz.show_dendrogram&&(f(t),p(t)),n(t,z),_.each(["row","col"],function(e){var r=Number(d3.select("."+e+"_label_group").select("text").style("font-size").replace("px","")),o=8;r>o&&d3.selectAll(t.root+" ."+e+"_label_group").each(function(){m(t,this,e)})}),h(t),t.viz.show_categories.col&&v(t),l(t),t.labels.super_labels&&i(t),d3.select(t.viz.viz_svg).append("rect").classed("left_border",!0).classed("borders",!0).attr("fill",e).attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),d3.select(t.viz.viz_svg).append("rect").classed("right_border",!0).classed("borders",!0).attr("fill",e).attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",function(){var e=t.viz.svg_dim.width-t.viz.grey_border_width;return"translate("+e+",0)"}),d3.select(t.viz.viz_svg).append("rect").classed("top_border",!0).classed("borders",!0).attr("fill",e).attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),d3.select(t.viz.viz_svg).append("rect").classed("bottom_border",!0).classed("borders",!0).attr("fill",e).attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var e=t.viz.svg_dim.height-t.viz.grey_border_width;return"translate(0,"+e+")"}),d(t),u(t),t.viz.do_zoom&&d3.select(t.viz.zoom_element).call(t.zoom_behavior),d3.select(t.viz.zoom_element).on("dblclick.zoom",null);var x=s(t,t.network_data.row_nodes,"name"),b=function(e){var r=d3.scale.linear().domain([0,1]).range([1,.1]),o=r(e);"linear"===t.matrix.opacity_function?t.matrix.opacity_scale=d3.scale.linear().domain([0,o*Math.abs(t.matrix.max_link)]).clamp(!0).range([0,1]):"log"===t.matrix.opacity_function&&(t.matrix.opacity_scale=d3.scale.log().domain([1e-4,o*Math.abs(t.matrix.max_link)]).clamp(!0).range([0,1])),d3.selectAll(t.root+" .tile").style("fill-opacity",function(e){return t.matrix.opacity_scale(Math.abs(e.value))})};return{get_clust_group:function(){return w.get_clust_group()},get_matrix:function(){return w.get_matrix()},get_nodes:function(t){return w.get_nodes(t)},find_entity:x.find_entity,get_entities:x.get_entities,opacity_slider:b,draw_gridlines:w.draw_gridlines,reset_zoom:r}}},function(t,e,r){"use strict";var o=r(133),a=r(136),n=r(135);t.exports=function(t,e){d3.selectAll(".tile_tip").style("display","none"),e=a(t,e),e=n(t,e),o(t,e)}},function(t,e){"use strict";t.exports=function(t){var e={};return t.viz.zoom_switch>1?(e.row=t.labels.default_fs_row*t.zoom_behavior.scale(),e.col=t.labels.default_fs_col*t.zoom_behavior.scale()):(e.row=t.labels.default_fs_row*t.zoom_behavior.scale()/t.viz.zoom_switch_y,e.col=t.labels.default_fs_col*t.zoom_behavior.scale()),e}},function(t,e,r){"use strict";var o=r(1);t.exports=function(t,e){o.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").attr("width",function(r){var o=0;return o=t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}).attr("x",function(r){var o=0;return o=-t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}),o.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",function(r){var o=0;return r.value>0&&(o=t.labels.bar_scale_col(r.value)/e.zoom_x),o})}},function(t,e,r){"use strict";var o=r(22),a=r(137),n=r(2),i=r(132),l=r(60);t.exports=function(t,e){d3.select(t.root+" .clust_group").attr("transform","translate("+[e.trans_x,e.trans_y]+") scale("+e.zoom_x+","+e.zoom_y+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,e.trans_y]+") scale("+e.zoom_y+")"),d3.select(t.root+" .col_zoom_container").attr("transform","translate("+[e.trans_x,0]+") scale("+e.zoom_x+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,e.trans_y]+") scale( 1,"+e.zoom_y+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[t.viz.uni_margin/2,e.trans_y]+") scale( 1,"+e.zoom_y+")"),d3.select(t.root+" .col_cat_container").attr("transform","translate("+[e.trans_x,0]+") scale("+e.zoom_x+",1)"),d3.select(t.root+" .col_dendro_container").attr("transform","translate("+[e.trans_x,t.viz.uni_margin/2]+") scale("+e.zoom_x+",1)"),t.zoom_behavior.translate([e.trans_x+t.viz.clust.margin.left,e.trans_y+t.viz.clust.margin.top]),o(t),i(t,e),d3.select(t.root+" .viz_svg").attr("is_zoom",function(){var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom"));return d3.select(t.root+" .viz_svg").attr("stopped_zoom",1),e+1});var r=function(){d3.select(t.root+" .viz_svg").attr("is_zoom",function(){
var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom"));return e-1})};setTimeout(r,100),setTimeout(a,1e3,t),_.each(["row","col"],function(e){var r=l(t,e);if(r>250)d3.selectAll(t.root+" ."+e+"_label_group").select("text").style("display","none"),d3.selectAll(t.root+" ."+e+"_cat_group").select("path").style("display","none"),d3.selectAll(".horz_lines").select("line").style("display","none"),d3.selectAll(".vert_lines").select("line").style("display","none");else if(r>40){var o=d3.scale.linear().domain([1,500]).range([3,1]).clamp(!0),a=Math.floor(o(r));d3.selectAll(t.root+" ."+e+"_label_group").select("text").style("opacity",.5).text(function(t){return t.name.substring(0,a)+".."})}}),n(t,e)}},function(t,e){"use strict";t.exports=function(t,e,r){var o=d3.select(e).attr("transform");if("row"===r){var a=Number(o.split(",")[1].split(")")[0]);d3.select(e).style("display",function(){var e;return e=a<t.max_y&&a>t.min_y?"block":"none"})}else{var n=Number(o.split("(")[1].split(",")[0].split(")")[0]);d3.select(e).style("display",function(){var e;return e=n<t.max_x&&n>t.min_x?"block":"none"})}}},function(t,e){"use strict";t.exports=function(t,e){return t.viz.zoom_switch>1&&(e.zoom_x<t.viz.zoom_switch?(e.trans_x=0,e.zoom_x=1):e.zoom_x=e.zoom_x/t.viz.zoom_switch),e.pan_room_x=(e.zoom_x-1)*t.viz.clust.dim.width,e.trans_x>0?e.trans_x=0:e.trans_x<=-e.pan_room_x&&(e.trans_x=-e.pan_room_x),e}},function(t,e){"use strict";t.exports=function(t,e){return t.viz.zoom_switch_y>1&&(e.zoom_y<t.viz.zoom_switch_y?(e.trans_y=0,e.zoom_y=1):e.zoom_y=e.zoom_y/t.viz.zoom_switch_y),e.pan_room_y=(e.zoom_y-1)*t.viz.clust.dim.height,e.trans_y>=0?e.trans_y=0:e.trans_y<=-e.pan_room_y&&(e.trans_y=-e.pan_room_y),e}},function(t,e,r){"use strict";var o=r(60),a=r(24),n=r(22);t.exports=function(t){function e(){_.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group").filter(function(){return"none"!=d3.select(this).style("display")}).select("text").style("font-size",function(){var t=Number(d3.select(this).style("font-size").replace("px",""));return t})})}var r=Number(d3.select(t.root+" .viz_svg").attr("is_zoom"));if(_.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group").select("text").style("opacity",1),d3.selectAll(t.root+" ."+e+"_cat_group").select("path").style("display","block")}),0===r){var i=Number(d3.select(t.root+" .viz_svg").attr("stopped_zoom"));0!=i&&(d3.selectAll(t.root+" .row_label_group").select("text").style("display","none"),d3.selectAll(t.root+" .row_label_group").select("text").style("display","block"),d3.select(t.root+" .viz_svg").attr("stopped_zoom",0),d3.selectAll(t.root+" .row_label_group").select("text").style("display","block"),d3.selectAll(t.root+" .col_label_group").select("text").style("display","block"),d3.selectAll(t.root+" .horz_lines").select("line").style("display","block"),d3.selectAll(t.root+" .vert_lines").select("line").style("display","block"),_.each(["row","col"],function(e){var r=o(t,e);125>r&&d3.selectAll(t.root+" ."+e+"_label_group").each(function(){a(t,this,e)})}),e(),n(t)),setTimeout(e,25),setTimeout(e,100)}}}]);
